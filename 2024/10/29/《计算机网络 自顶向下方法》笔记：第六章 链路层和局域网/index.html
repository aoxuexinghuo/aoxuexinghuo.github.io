<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>《计算机网络 自顶向下方法》笔记：第六章 链路层和局域网 | ℡傲雪&amp;星火ぴ</title><meta name="author" content="℡傲雪&amp;星火ぴ"><meta name="copyright" content="℡傲雪&amp;星火ぴ"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="🚥计算机网络 自顶向下方法 系列文章导航🚥 《计算机网络 自顶向下方法》笔记：第一章 计算机网络和因特网《计算机网络 自顶向下方法》笔记：第二章 应用层《计算机网络 自顶向下方法》笔记：第三章 传输层《计算机网络 自顶向下方法》笔记：第四章 网络层：数据平面《计算机网络 自顶向下方法》笔记：第五章 网络层：控制平面《计算机网络 自顶向下方法》笔记：第六章 链路层和局域网  一、引论和服务 1">
<meta property="og:type" content="article">
<meta property="og:title" content="《计算机网络 自顶向下方法》笔记：第六章 链路层和局域网">
<meta property="og:url" content="https://aoxuexinghuo.github.io/2024/10/29/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%20%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95%E3%80%8B%E7%AC%94%E8%AE%B0%EF%BC%9A%E7%AC%AC%E5%85%AD%E7%AB%A0%20%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/index.html">
<meta property="og:site_name" content="℡傲雪&amp;星火ぴ">
<meta property="og:description" content="🚥计算机网络 自顶向下方法 系列文章导航🚥 《计算机网络 自顶向下方法》笔记：第一章 计算机网络和因特网《计算机网络 自顶向下方法》笔记：第二章 应用层《计算机网络 自顶向下方法》笔记：第三章 传输层《计算机网络 自顶向下方法》笔记：第四章 网络层：数据平面《计算机网络 自顶向下方法》笔记：第五章 网络层：控制平面《计算机网络 自顶向下方法》笔记：第六章 链路层和局域网  一、引论和服务 1">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://bu.dusays.com/2024/11/27/6746e041bb5c4.jpg">
<meta property="article:published_time" content="2024-10-29T02:50:00.000Z">
<meta property="article:modified_time" content="2025-03-26T12:57:06.019Z">
<meta property="article:author" content="℡傲雪&amp;星火ぴ">
<meta property="article:tag" content="笔记">
<meta property="article:tag" content="计算机网络">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://bu.dusays.com/2024/11/27/6746e041bb5c4.jpg"><link rel="shortcut icon" href="/img/pikachu.png"><link rel="canonical" href="https://aoxuexinghuo.github.io/2024/10/29/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%20%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95%E3%80%8B%E7%AC%94%E8%AE%B0%EF%BC%9A%E7%AC%AC%E5%85%AD%E7%AB%A0%20%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":"ture","top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":150,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '《计算机网络 自顶向下方法》笔记：第六章 链路层和局域网',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/progress_bar.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_4778163_aof4rb3tf27.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><div class="loading-img"></div><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (false) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div id="web_bg" style="background-image: url(https://bu.dusays.com/2024/11/27/6746de97857ae.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/28/6747d82900e41.jpg" onerror="onerror=null;src='https://bu.dusays.com/2024/11/28/6748473533994.jpeg'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">29</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-pokeball"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw iconfont icon-adress"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw iconfont icon-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw iconfont icon-folder"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw iconfont icon-acamulator"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw iconfont icon-paper_plane"></i><span> 友人帐</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw iconfont icon-comete"></i><span> 我的</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw iconfont icon-mount"></i><span> 朝花夕拾</span></a></li><li><a class="site-page child" href="/list/"><i class="fa-fw iconfont icon-check"></i><span> 清单</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw iconfont icon-heart"></i><span> 关于</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://bu.dusays.com/2024/11/27/6746e041bb5c4.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">℡傲雪&amp;星火ぴ</span></a><a class="nav-page-title" href="/"><span class="site-name">℡傲雪&amp;星火ぴ</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><!--span= ' ' + _p('search.title')--></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-pokeball"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw iconfont icon-adress"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw iconfont icon-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw iconfont icon-folder"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw iconfont icon-acamulator"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw iconfont icon-paper_plane"></i><span> 友人帐</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw iconfont icon-comete"></i><span> 我的</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw iconfont icon-mount"></i><span> 朝花夕拾</span></a></li><li><a class="site-page child" href="/list/"><i class="fa-fw iconfont icon-check"></i><span> 清单</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw iconfont icon-heart"></i><span> 关于</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">《计算机网络 自顶向下方法》笔记：第六章 链路层和局域网</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-10-29T02:50:00.000Z" title="发表于 2024-10-29 10:50:00">2024-10-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-03-26T12:57:06.019Z" title="更新于 2025-03-26 20:57:06">2025-03-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">12.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>37分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><blockquote>
<p><strong>🚥计算机网络 自顶向下方法 系列文章导航🚥</strong></p>
<ol class="series-items"><li><a href="/2024/09/22/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%20%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95%E3%80%8B%E7%AC%94%E8%AE%B0%EF%BC%9A%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E5%9B%A0%E7%89%B9%E7%BD%91/" title="《计算机网络 自顶向下方法》笔记：第一章 计算机网络和因特网">《计算机网络 自顶向下方法》笔记：第一章 计算机网络和因特网</a></li><li><a href="/2024/09/22/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%20%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95%E3%80%8B%E7%AC%94%E8%AE%B0%EF%BC%9A%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E5%BA%94%E7%94%A8%E5%B1%82/" title="《计算机网络 自顶向下方法》笔记：第二章 应用层">《计算机网络 自顶向下方法》笔记：第二章 应用层</a></li><li><a href="/2024/09/26/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%20%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95%E3%80%8B%E7%AC%94%E8%AE%B0%EF%BC%9A%E7%AC%AC%E4%B8%89%E7%AB%A0-%E4%BC%A0%E8%BE%93%E5%B1%82/" title="《计算机网络 自顶向下方法》笔记：第三章 传输层">《计算机网络 自顶向下方法》笔记：第三章 传输层</a></li><li><a href="/2024/10/13/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%20%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95%E3%80%8B%E7%AC%94%E8%AE%B0%EF%BC%9A%E7%AC%AC%E5%9B%9B%E7%AB%A0%20%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/" title="《计算机网络 自顶向下方法》笔记：第四章 网络层：数据平面">《计算机网络 自顶向下方法》笔记：第四章 网络层：数据平面</a></li><li><a href="/2024/10/24/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%20%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95%E3%80%8B%E7%AC%94%E8%AE%B0%EF%BC%9A%E7%AC%AC%E4%BA%94%E7%AB%A0%20%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/" title="《计算机网络 自顶向下方法》笔记：第五章 网络层：控制平面">《计算机网络 自顶向下方法》笔记：第五章 网络层：控制平面</a></li><li><a href="/2024/10/29/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%20%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95%E3%80%8B%E7%AC%94%E8%AE%B0%EF%BC%9A%E7%AC%AC%E5%85%AD%E7%AB%A0%20%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/" title="《计算机网络 自顶向下方法》笔记：第六章 链路层和局域网">《计算机网络 自顶向下方法》笔记：第六章 链路层和局域网</a></li></ol>
</blockquote>
<h2 id="一、引论和服务">一、引论和服务</h2>
<h3 id="1-网络节点的连接方式">1.网络节点的连接方式</h3>
<p><strong>WAN（广域网）一般采用点到点的链路连接</strong>，因为距离较远，带宽大，采用多点连接方式一旦出现碰撞代价过大。</p>
<p><strong>LAN（局域网）一般采用多点连接方式</strong>，节点只需要连接到共享型介质上，就可以实现与其他所有节点的互通，但多个节点同时尝试发送数据时，可能会产生数据碰撞。</p>
<p>点到点的链路的链路层服务实现很简单，只是单纯的封装和解封装；多点连接方式网络的链路层功能较为复杂，需要考虑多点接入（协调各节点对共享型介质的访问和使用）、竞争方式（发生冲突之后的协调）、令牌方式（令牌的产生、占有和释放。这里的令牌是一种特殊的数据包，用于控制网络设备访问共享通信介质的一种机制，只有持有令牌的结点才被允许发送数据）等问题。</p>
<p>在后面的内容中，我们统一规定：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>运行链路层协议的任何设备都称为<strong>节点（node）</strong>，如主机、路由器、交换机和WiFi接入点等。</p>
</li>
<li class="lvl-2">
<p>沿通信路径连接相邻节点的通信信道称为<strong>链路（link）</strong>，可以是有线链路、无线链路、局域网（共享型链路）。</p>
</li>
<li class="lvl-2">
<p>在通过特定的链路时，传输节点将数据报封装在<strong>链路层帧</strong>中，并将该帧传送到链路中。</p>
</li>
</ul>
<h3 id="2-链路层提供的服务">2.链路层提供的服务</h3>
<p>如果说网络层解决的是端到端（主机到主机）的问题，那么链路层解决的是则点到点的问题（这里的点指主机或者路由器）。</p>
<p>虽然从整体上看链路层提供的服务都是将来自网络层的数据报封装成帧，然后通过单一通信链路从一个节点移动到相邻节点，但具体实现的细节会随着链路层协议的不同而变化。从网络层的角度上看，是直接从一个主机发送到另一个主机，但从链路层的角度看，可能第一跳链路是以太网链路，第二跳链路是帧中继链路，第三跳是无线局域网（如Wi-Fi 802.11标准）。这好比我们从大连到合肥，先坐地铁，再坐飞机，最后坐公交，经历了三种不同的运输方式。</p>
<p>链路层协议能够提供的可能服务包括：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>成帧（framing）</strong>：一个帧由一个数据字段和若干首部字段组成，其中网络层数据报就插在数据字段中，帧头部使用“<strong>MAC</strong>”（物理）地址来标示源和目的。帧的具体结构在不同的链路层协议中会有所不同。</p>
</li>
<li class="lvl-2">
<p><strong>链路接入</strong>：<strong>媒体访问控制协议（Medium Access Control，MAC）协议</strong>（这里的MAC和前面的MAC地址是两个不同的概念，天天用缩写终于还是出事了吧doge）规定了帧在链路上传输的规则。点对点链路上，MAC协议主要确保无论何时链路空闲，都能够顺利发送帧；多点连接的情况下，MAC协议较为复杂，用于协调多个节点的帧传输。</p>
</li>
<li class="lvl-2">
<p><strong>可靠交付</strong>：当链路层协议提供可靠交付服务时，它保证无差错地经链路层移动每个网络层数据报。但是在一些低出错率的链路上（光纤、同轴电缆、和双绞铜线链路）一般不提供可靠地交付服务。</p>
</li>
<li class="lvl-2">
<p><strong>差错检测和纠正</strong>：链路层的差错检测相较于上两层通常更复杂，并且用<strong>硬件</strong>实现。一般通过让发送节点在帧中包括差错检测比特，接收节点进行差错检查的方式来完成这项工作。差错纠正类似于差错检测，区别在于能额外确定帧中差错的位置并纠正。后面我们将详细介绍具体流程。</p>
</li>
<li class="lvl-2">
<p><strong>半双工和全双工</strong>：半双工指链路可以双向传输，但是同一时刻只能有一个方向。</p>
</li>
</ul>
<h3 id="3-链路层实现的位置">3.链路层实现的位置</h3>
<p>链路层的主体部分实在<strong>网络适配器（network adapter）<strong>中实现的，也被称为</strong>网络接口卡（Network Interface Card，NIC）</strong>，就是我们通常说的网卡。网络适配器实现链路层功能和相应的物理层功能，具体关系如下面的主机体系结构所示：</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457df8e66c6.png" alt="1" style="zoom:67%;" />
<p>链路层的实现存在于网络中每一个主机、路由器、交换机上，它们之间的通信如下图所示：</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457e007f874.png" alt="2" style="zoom:67%;" />
<p>发送方：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>在帧中封装数据报。</p>
</li>
<li class="lvl-2">
<p>加上差错控制编码，实现RDT（Reliable Data Transfer，可靠数据传输）和流量控制功能等。</p>
</li>
</ul>
<p>接收方：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>检查有无出错，执行RDT和流量控制功能等。</p>
</li>
<li class="lvl-2">
<p>解封装数据报，将其交给上层。</p>
</li>
</ul>
<h2 id="二、差错检测和纠正">二、差错检测和纠正</h2>
<h3 id="1-场景介绍">1.场景介绍</h3>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457e08c88c3.png" alt="3" style="zoom: 80%;" />
<p>上图是我们研究差错检测与纠正技术的环境。在发送节点，为了保护比特免受差错，使用<strong>差错检测和纠正比特（Error-Detection and-Correction，EDC）</strong> 对数据D进行增强，D即为我们需要保护的数据，它不仅包括从网络层传递下来的数据报，还包括链路帧首部中的链路级的寻址信息、序号。接收方的任务是在只接收到D'和EDC'的情况下，确认D'和D是否相同。</p>
<p>差错检测和纠正技术并非总能检测出已经出现的比特差错，也就是说没通过检验说明一定出错，通过检验也不能保证一定不出错。</p>
<p>差错检测主要有以下三种常用技术：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>奇偶校验</strong>：用于描述差错检测和纠正背后隐含的基本思想。</p>
</li>
<li class="lvl-2">
<p><strong>校验和方法</strong>：通常更多地应用于运输层。</p>
</li>
<li class="lvl-2">
<p><strong>循环冗余检测</strong>：通常更多地应用在适配器中的链路层</p>
</li>
</ul>
<h3 id="2-奇偶校验">2.奇偶校验</h3>
<p>差错检测最简单的方式就是用单个<strong>奇偶校验位（parity bit）</strong>，以下图为例：</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457e1183663.png" alt="4" style="zoom:80%;" />
<p>在偶校验方案中，发送方只需要包含一个附加的比特，设置它的值使得这d+1个比特中1的总数是偶数；在奇校验中，则是使得1的个数为奇数。</p>
<p>接收方接收数据后，如果发下1的个数与预期不一致，则说明至少出现了一个比特差错，准确来说是出现了奇数个比特差错（偶数个差错则会相互抵消，无法被检测到），但无法确定是哪一个比特出错。</p>
<p>而在<strong>二维奇偶校验（two-dimensional parity）</strong> 中，包含比特值改变的行和列的校验值值都会出现差错，因此接收方可以利用行和列的索引来识别发生差错的单个比特并纠正它，如下图所示：</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457e1a4c0db.png" alt="5" style="zoom:67%;" />
<p>二维奇偶校验也能够检测一个分组中两个比特差错的任何组合，但无法纠正。此外，二维奇偶校验依旧可能存在无法检测到的比特差错，例如“田”字型的相邻四个比特均出现差错。</p>
<h3 id="3-检验和方法">3.检验和方法</h3>
<p>传输层UDP和TCP的检验和字段均是使用的这种方法，发送放将报文段看成一个个16比特的字段，不足16位的用0补齐。把所有字段相加，最高位的进位加到末尾上，得到的结果按位取反后作为校验和。因为一个二进制数和自己的反码相加的结果为全1。因为接收方只需要把所有的字段（包括首部和首部中的检验和）相加，判断得到结果是否为全1（FFFF）即可。</p>
<p>检验和方法和后面要讲的CRC方法相比，提供了相对弱的差错保护，但所需的分组开销较小。因为传输层的差错检测用软件实现，因此选用简单快速的检验和方法更合适；而链路层的差错检测在适配器中用专门的硬件实现，能够快速执行更加复杂的CRC操作。</p>
<h3 id="4-循环冗余检测">4.循环冗余检测</h3>
<p>现今的计算网络中广泛应用的差错检测技术基于<strong>循环冗余检测（Cyclic Redundancy Check，CRC）编码</strong>。</p>
<p>在研究CRC编码之前，我们先了解以下概念：</p>
<blockquote>
<p><strong>（1）模2运算</strong></p>
<p>加法不进位，减法不借位，位与位之间无关。这意味着加法和减法是相同的，这种操作等价于异或（XRO）。</p>
<p><strong>（2）位串的两种表示</strong></p>
<p>以1011为例，它可以表示为：x^3+x+1。</p>
<p><strong>（3）生成多项式</strong></p>
<p>CRC中的生成多项式通常表示为以下形式：</p>
<mjx-container class="MathJax" jax="SVG" display="true" style="direction: ltr; display: block; text-align: center; margin: 1em 0; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="38.191ex" height="2.565ex" role="img" focusable="false" viewBox="0 -883.9 16880.6 1133.9" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(786,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(1175,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(1747,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(2413.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width: 3;"/></g><g data-mml-node="msup" transform="translate(3469.6,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(605,413) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z" style="stroke-width: 3;"/></g></g><g data-mml-node="mo" transform="translate(4771,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z" style="stroke-width: 3;"/></g><g data-mml-node="msub" transform="translate(5771.3,0)"><g data-mml-node="mi"><path data-c="1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z" style="stroke-width: 3;"/></g><g data-mml-node="TeXAtom" transform="translate(510,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(600,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(1378,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"/></g></g></g><g data-mml-node="msup" transform="translate(7659.2,0)"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z" style="stroke-width: 3;"/></g><g data-mml-node="TeXAtom" transform="translate(605,413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(600,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(1378,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"/></g></g></g><g data-mml-node="mo" transform="translate(9864.4,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(10864.6,0)"><path data-c="22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(12258.8,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z" style="stroke-width: 3;"/></g><g data-mml-node="msub" transform="translate(13259,0)"><g data-mml-node="mi"><path data-c="1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(510,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"/></g></g><g data-mml-node="mi" transform="translate(14172.6,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(14966.8,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z" style="stroke-width: 3;"/></g><g data-mml-node="msub" transform="translate(15967,0)"><g data-mml-node="mi"><path data-c="1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(510,-150) scale(0.707)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" style="stroke-width: 3;"/></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; overflow: hidden; width: 100%;"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>G</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mi>x</mi><mi>n</mi></msup><mo>+</mo><msub><mi>g</mi><mrow data-mjx-texclass="ORD"><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><msup><mi>x</mi><mrow data-mjx-texclass="ORD"><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>g</mi><mn>1</mn></msub><mi>x</mi><mo>+</mo><msub><mi>g</mi><mn>0</mn></msub></math></mjx-assistive-mml></mjx-container><p>其中g是二进制系数，通常为0或者1，生成多项式的最高次项为x^n，最低次项为g0，生成多项式的阶数决定了CRC校验码的长度，两者相等。</p>
</blockquote>
<p>CRC 编码的操作如下，对于一个 d 比特的数据D，在发送前，发送方和接收方先约定一个 r+1 比特模式，称为生成多项式，我们将其表示为 G，要求 G 的最高有效位为 1。发送方要选择 r 个附加比特 R，并将他们附加到 D 上，使得得到的 d+r 比特模式用模 2 算术恰好能够被 G 整除。具体如下图所示：</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457e231d145.png" alt="6" style="zoom: 67%;" />
<p>接收方进行差错检测室，用G去除接收到的 d+r 比特，如果余数非零，则说明出现了差错，否则认为数据正确而被接收。而所有的 CRC 计算均采用模2运算来计算。</p>
<p>那么发送方是怎么计算出R的呢？</p>
<p>已知生成多项式G是提前约定好的，我们需要设计R满足：</p>
<mjx-container class="MathJax" jax="SVG" display="true" style="direction: ltr; display: block; text-align: center; margin: 1em 0; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.188ex;" xmlns="http://www.w3.org/2000/svg" width="16.184ex" height="1.829ex" role="img" focusable="false" viewBox="0 -725.5 7153.3 808.5" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(1050.2,0)"><path data-c="22C5" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250Z" style="stroke-width: 3;"/></g><g data-mml-node="msup" transform="translate(1550.4,0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(533,413) scale(0.707)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z" style="stroke-width: 3;"/></g></g><g data-mml-node="mo" transform="translate(2674.6,0)"><path data-c="2295" d="M56 250Q56 394 156 488T384 583Q530 583 626 485T722 250Q722 110 625 14T390 -83Q249 -83 153 14T56 250ZM364 542Q308 539 251 509T148 418T96 278V270H369V542H364ZM681 278Q675 338 650 386T592 462T522 509T458 535T412 542H409V270H681V278ZM96 222Q104 150 139 95T219 12T302 -29T366 -42H369V230H96V222ZM681 222V230H409V-42H412Q429 -42 456 -36T521 -10T590 37T649 113T681 222Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(3674.8,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(4711.6,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(5767.3,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(6367.3,0)"><path data-c="1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z" style="stroke-width: 3;"/></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; overflow: hidden; width: 100%;"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>D</mi><mo>⋅</mo><msup><mn>2</mn><mi>r</mi></msup><mo>⊕</mo><mi>R</mi><mo>=</mo><mi>n</mi><mi>G</mi></math></mjx-assistive-mml></mjx-container><p>等式左边表示把D左移r位后，再补上R。它的值应该是G的n倍。我们在等式两边同时异或一个R，左边的两个R抵消，得到：</p>
<mjx-container class="MathJax" jax="SVG" display="true" style="direction: ltr; display: block; text-align: center; margin: 1em 0; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.188ex;" xmlns="http://www.w3.org/2000/svg" width="16.184ex" height="1.829ex" role="img" focusable="false" viewBox="0 -725.5 7153.3 808.5" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(1050.2,0)"><path data-c="22C5" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250Z" style="stroke-width: 3;"/></g><g data-mml-node="msup" transform="translate(1550.4,0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(533,413) scale(0.707)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z" style="stroke-width: 3;"/></g></g><g data-mml-node="mo" transform="translate(2730.1,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(3785.9,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(4385.9,0)"><path data-c="1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(5394.1,0)"><path data-c="2295" d="M56 250Q56 394 156 488T384 583Q530 583 626 485T722 250Q722 110 625 14T390 -83Q249 -83 153 14T56 250ZM364 542Q308 539 251 509T148 418T96 278V270H369V542H364ZM681 278Q675 338 650 386T592 462T522 509T458 535T412 542H409V270H681V278ZM96 222Q104 150 139 95T219 12T302 -29T366 -42H369V230H96V222ZM681 222V230H409V-42H412Q429 -42 456 -36T521 -10T590 37T649 113T681 222Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(6394.3,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z" style="stroke-width: 3;"/></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; overflow: hidden; width: 100%;"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>D</mi><mo>⋅</mo><msup><mn>2</mn><mi>r</mi></msup><mo>=</mo><mi>n</mi><mi>G</mi><mo>⊕</mo><mi>R</mi></math></mjx-assistive-mml></mjx-container><p>这个等式告诉我们，如果我们用G来除D*2^r，得到的余值刚好是R（为什么呢？这里我们把异或看成加号会更容易理解），也就是说：</p>
<mjx-container class="MathJax" jax="SVG" display="true" style="direction: ltr; display: block; text-align: center; margin: 1em 0; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -2.148ex;" xmlns="http://www.w3.org/2000/svg" width="24.929ex" height="5.428ex" role="img" focusable="false" viewBox="0 -1449.5 11018.6 2399" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(1036.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width: 3;"/></g><g data-mml-node="mtext" transform="translate(2092.6,0)"><path data-c="72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z" style="stroke-width: 3;"/><path data-c="65" d="M28 218Q28 273 48 318T98 391T163 433T229 448Q282 448 320 430T378 380T406 316T415 245Q415 238 408 231H126V216Q126 68 226 36Q246 30 270 30Q312 30 342 62Q359 79 369 104L379 128Q382 131 395 131H398Q415 131 415 121Q415 117 412 108Q393 53 349 21T250 -11Q155 -11 92 58T28 218ZM333 275Q322 403 238 411H236Q228 411 220 410T195 402T166 381T143 340T127 274V267H333V275Z" transform="translate(392,0)" style="stroke-width: 3;"/><path data-c="6D" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q351 442 364 440T387 434T406 426T421 417T432 406T441 395T448 384T452 374T455 366L457 361L460 365Q463 369 466 373T475 384T488 397T503 410T523 422T546 432T572 439T603 442Q729 442 740 329Q741 322 741 190V104Q741 66 743 59T754 49Q775 46 803 46H819V0H811L788 1Q764 2 737 2T699 3Q596 3 587 0H579V46H595Q656 46 656 62Q657 64 657 200Q656 335 655 343Q649 371 635 385T611 402T585 404Q540 404 506 370Q479 343 472 315T464 232V168V108Q464 78 465 68T468 55T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(836,0)" style="stroke-width: 3;"/><path data-c="61" d="M137 305T115 305T78 320T63 359Q63 394 97 421T218 448Q291 448 336 416T396 340Q401 326 401 309T402 194V124Q402 76 407 58T428 40Q443 40 448 56T453 109V145H493V106Q492 66 490 59Q481 29 455 12T400 -6T353 12T329 54V58L327 55Q325 52 322 49T314 40T302 29T287 17T269 6T247 -2T221 -8T190 -11Q130 -11 82 20T34 107Q34 128 41 147T68 188T116 225T194 253T304 268H318V290Q318 324 312 340Q290 411 215 411Q197 411 181 410T156 406T148 403Q170 388 170 359Q170 334 154 320ZM126 106Q126 75 150 51T209 26Q247 26 276 49T315 109Q317 116 318 175Q318 233 317 233Q309 233 296 232T251 223T193 203T147 166T126 106Z" transform="translate(1669,0)" style="stroke-width: 3;"/><path data-c="69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z" transform="translate(2169,0)" style="stroke-width: 3;"/><path data-c="6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(2447,0)" style="stroke-width: 3;"/><path data-c="64" d="M376 495Q376 511 376 535T377 568Q377 613 367 624T316 637H298V660Q298 683 300 683L310 684Q320 685 339 686T376 688Q393 689 413 690T443 693T454 694H457V390Q457 84 458 81Q461 61 472 55T517 46H535V0Q533 0 459 -5T380 -11H373V44L365 37Q307 -11 235 -11Q158 -11 96 50T34 215Q34 315 97 378T244 442Q319 442 376 393V495ZM373 342Q328 405 260 405Q211 405 173 369Q146 341 139 305T131 211Q131 155 138 120T173 59Q203 26 251 26Q322 26 373 103V342Z" transform="translate(3003,0)" style="stroke-width: 3;"/><path data-c="65" d="M28 218Q28 273 48 318T98 391T163 433T229 448Q282 448 320 430T378 380T406 316T415 245Q415 238 408 231H126V216Q126 68 226 36Q246 30 270 30Q312 30 342 62Q359 79 369 104L379 128Q382 131 395 131H398Q415 131 415 121Q415 117 412 108Q393 53 349 21T250 -11Q155 -11 92 58T28 218ZM333 275Q322 403 238 411H236Q228 411 220 410T195 402T166 381T143 340T127 274V267H333V275Z" transform="translate(3559,0)" style="stroke-width: 3;"/><path data-c="72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z" transform="translate(4003,0)" style="stroke-width: 3;"/></g><g data-mml-node="mrow" transform="translate(6654.2,0)"><g data-mml-node="mo" transform="translate(0 -0.5)"><path data-c="28" d="M701 -940Q701 -943 695 -949H664Q662 -947 636 -922T591 -879T537 -818T475 -737T412 -636T350 -511T295 -362T250 -186T221 17T209 251Q209 962 573 1361Q596 1386 616 1405T649 1437T664 1450H695Q701 1444 701 1441Q701 1436 681 1415T629 1356T557 1261T476 1118T400 927T340 675T308 359Q306 321 306 250Q306 -139 400 -430T690 -924Q701 -936 701 -940Z" style="stroke-width: 3;"/></g><g data-mml-node="mfrac" transform="translate(736,0)"><g data-mml-node="mrow" transform="translate(220,676)"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(1050.2,0)"><path data-c="22C5" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250Z" style="stroke-width: 3;"/></g><g data-mml-node="msup" transform="translate(1550.4,0)"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(533,363) scale(0.707)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z" style="stroke-width: 3;"/></g></g></g><g data-mml-node="mi" transform="translate(1053.2,-686)"><path data-c="1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z" style="stroke-width: 3;"/></g><rect width="2652.3" height="60" x="120" y="220"/></g><g data-mml-node="mo" transform="translate(3628.3,0) translate(0 -0.5)"><path data-c="29" d="M34 1438Q34 1446 37 1448T50 1450H56H71Q73 1448 99 1423T144 1380T198 1319T260 1238T323 1137T385 1013T440 864T485 688T514 485T526 251Q526 134 519 53Q472 -519 162 -860Q139 -885 119 -904T86 -936T71 -949H56Q43 -949 39 -947T34 -937Q88 -883 140 -813Q428 -430 428 251Q428 453 402 628T338 922T245 1146T145 1309T46 1425Q44 1427 42 1429T39 1433T36 1436L34 1438Z" style="stroke-width: 3;"/></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; overflow: hidden; width: 100%;"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>R</mi><mo>=</mo><mtext>remainder</mtext><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mfrac><mrow><mi>D</mi><mo>⋅</mo><msup><mn>2</mn><mi>r</mi></msup></mrow><mi>G</mi></mfrac><mo data-mjx-texclass="CLOSE">)</mo></mrow></math></mjx-assistive-mml></mjx-container><blockquote>
<p><strong>注意</strong>：这里的remainder表示余数，生成多项式G取 r+1 比特是为了能够得到最高 r 位的余数。</p>
</blockquote>
<p>下面我们举一个具体的计算示例：</p>
<p>假设 D = 101110，d = 6，G = 1001，r = 3，在这种情况下计算R。</p>
<p>我们把D左移3位，末尾补上0，使用模2运算来计算它除以G = 1001后的结果，过程如下：</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457e2de8cfe.png" alt="7" style="zoom: 50%;" />
<p>计算过程需要严格按照模 2 运算的规则，最后得到的余数为 11，但是R需要 3 位，因此我们在前面补上一个 0 得到 R。</p>
<h2 id="三、多点访问链路和协议">三、多点访问链路和协议</h2>
<h3 id="1-简介">1.简介</h3>
<p>前面提到网络链路有两种类型：点对点链路和广播链路（即多点连接方式）。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>点对点链路（point-to-point link）</strong> 由链路一端的单个发送方和链路另一端的单个接收方组成。点对点协议（point-to-point protocol，PPP）和高级数据链路控制（high-level data link control，HDLC）便是为这种网络链路设计的协议。</p>
</li>
<li class="lvl-2">
<p><strong>广播链路（broadcast link）</strong> 能够让多个发送和接收节点都连接到相同的、单一的、共享的广播信道上。这里的广播意味着任何一个节点传输一个帧时，信道都会广播该帧，每个其他节点都会收到一个特定的副本。传统的以太网和无线局域网都是广播链路层技术的例子。</p>
</li>
</ul>
<p>在广播链路中应该如何协调多个发送和接收节点对一个共享广播信道的访问，我们将其称为<strong>多路访问问题（multiple access problem）</strong>。</p>
<p>在广播链路中，当多个节点同时传输帧时，传输的帧会在所有的接收方处<strong>碰撞（collide）</strong>。当碰撞发生时，接收节点无法有效地获得任何传输的帧。<strong>多路访问协议（multiple access protocol）</strong> 便是用来解决这种问题的。</p>
<p>一般来说，我们能够将任何多路访问协议划分为以下3种类型之一：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>信道划分协议（channel partitioning protocol）</strong></p>
</li>
<li class="lvl-2">
<p><strong>随机接入协议（random access protocol）</strong></p>
</li>
<li class="lvl-2">
<p><strong>轮流协议（taking-turns protocol）</strong></p>
</li>
</ul>
<p>理想情况下，对于速率为 R bps 的广播信道，我们对多路访问协议有如下期望：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>当仅有一个节点发送数据时，该节点具有 R bps 的吞吐量。</p>
</li>
<li class="lvl-2">
<p>当M个节点，每个节点吞吐量为 R/M bps。</p>
</li>
<li class="lvl-2">
<p>协议是分散的，不会因为某个主节点故障而导致整个系统崩溃。</p>
</li>
<li class="lvl-2">
<p>协议是简单的，使实现不昂贵。</p>
</li>
</ul>
<h3 id="2-信道划分协议">2.信道划分协议</h3>
<p>信道划分协议的思想主要是把信道划分成小片（按照时间、频率、编码等），然后将其分配给每个节点使用，实际上这部分内容我们在第一章也有提及。</p>
<p><strong>时分多路复用（TMD）</strong> 将时间划分为<strong>时间帧（time frame）</strong>，并进一步划分每个时间帧为N个<strong>时隙（slot）</strong>，然后把每个时隙分配给N个节点中的一个，当某个节点要发送分组时，只能在轮到自己的时隙的时候才能进行传输。例如下图中，被分配到“2”的节点，只能在每个帧里标有“2”的时隙传输数据：</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457e38d67ca.png" alt="8" style="zoom:67%;" />
<p>TMD消除了碰撞且十分公平，每个节点在每个帧时间（注意是帧，不是时隙）内得到了专用的传输速率 R/N bps。但存在以下两个缺陷：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>每个节点被限制于 R/N bps 的平均速率，即使它是唯一需要发送分组的结点。</p>
</li>
<li class="lvl-2">
<p>节点必须等待它在传输序列中的轮次，只有到自己的轮次才能传输数据。</p>
</li>
</ul>
<p><strong>频分多路复用（FMD）</strong> 将 R bps 信道划分为不同的频段，每个频段具有 R/N 带宽，并把每个频率分配给N个节点中的一个。FDM有着和TMD同样的优缺点，速率也被限制在了 R/N bps。</p>
<p>第三种信道划分协议是<strong>码分多址（Code Division Multiple，CDMA）</strong>，CDMA对每个节点分配一种不同的编码，然后每个节点用它唯一的编码来对它发送的数据进行编码。通过这种方式，能够实现不同的节点同时传输数据且它们各自相应的接收方仍能正确接收发送方编码的数据比特（假设接收方知道方式方的编码），不会被其他节点发送的数据干扰。</p>
<h3 id="3-随机接入协议">3.随机接入协议</h3>
<h4 id="（1）时隙ALOHA">（1）时隙ALOHA</h4>
<p><strong>时隙ALOHA协议</strong>是最简单的随机接入协议，在该协议中，我们做出一下假设：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>所有帧（这里的帧值的是链路层帧，不是时间帧）是等长的。</p>
</li>
<li class="lvl-2">
<p>时间被划分成相等的时隙，每个时隙刚好可以发送一帧。</p>
</li>
<li class="lvl-2">
<p>每个节点只在时隙开始时发送帧。</p>
</li>
<li class="lvl-2">
<p>节点是同步的，每个节点都知道时隙何时开始。</p>
</li>
<li class="lvl-2">
<p>如果一个时隙中有两个及以上帧碰撞，则所有的节点在该时隙结束之前都能检测到碰撞。</p>
</li>
</ul>
<p>当碰撞发生后，碰撞的节点不会立即在下一个时隙重传，而是以概率P重传，直到成功。</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457e40a2eb8.png" alt="9" style="zoom:67%;" />
<p>以上图为例，1、2、3号节点在第一个时隙同时发送数据，产生碰撞。三个节点会各自尝试在后面的每个时隙以概率P重传（节点之间是独立的）。在第三个时隙，恰巧1、2号节点同时选择重传，再一次发生碰撞，传送失败。第四个时隙，只有2号节点选择重传，成功传输。第六个时隙，1、3号节点同时选择重传，发送碰撞。第八个时隙，只有1号节点选择重传，成功传输。第九个时隙，三号节点选择重传，没有碰撞，成功传输。</p>
<p>时隙ALOHA协议有着以下优点：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>当某节点是唯一活跃的节点时，时隙ALOHA允许其以全速R连续传输。</p>
</li>
<li class="lvl-2">
<p>各个节点之间是高度分散的（但需要在时钟上同步），每个节点之间独立检测碰撞并决定什么时候重传。</p>
</li>
</ul>
<p>但我们从图中也能看出来，当碰撞发生时，该时隙便被浪费了，且后续存在部分空白时隙没有节点选择重传，对时隙的利用率较低。</p>
<p><strong>时隙ALOHA的效率</strong></p>
<p>我们用成功传输的时隙占比来计算时隙ALOHA协议的效率，假设有N个节点，每个节点都有很多帧要发送，且在每个时隙中传输的概率是P。则一个节点成功传输的概率为</p>
<mjx-container class="MathJax" jax="SVG" display="true" style="direction: ltr; display: block; text-align: center; margin: 1em 0; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="11.586ex" height="2.593ex" role="img" focusable="false" viewBox="0 -896 5121 1146" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(503,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(892,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(1614.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(2614.4,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z" style="stroke-width: 3;"/></g><g data-mml-node="msup" transform="translate(3117.4,0)"><g data-mml-node="mo"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width: 3;"/></g><g data-mml-node="TeXAtom" transform="translate(422,413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(888,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(1666,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"/></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; overflow: hidden; width: 100%;"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>p</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><msup><mo stretchy="false">)</mo><mrow data-mjx-texclass="ORD"><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msup></math></mjx-assistive-mml></mjx-container><p>任何一个节点成功的概率是</p>
<mjx-container class="MathJax" jax="SVG" display="true" style="direction: ltr; display: block; text-align: center; margin: 1em 0; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="13.595ex" height="2.593ex" role="img" focusable="false" viewBox="0 -896 6009 1146" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(888,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(1391,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(1780,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(2502.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(3502.4,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z" style="stroke-width: 3;"/></g><g data-mml-node="msup" transform="translate(4005.4,0)"><g data-mml-node="mo"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width: 3;"/></g><g data-mml-node="TeXAtom" transform="translate(422,413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(888,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(1666,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"/></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; overflow: hidden; width: 100%;"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>N</mi><mi>p</mi><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><msup><mo stretchy="false">)</mo><mrow data-mjx-texclass="ORD"><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msup></math></mjx-assistive-mml></mjx-container><p>对其求导，计算出 p = 1/N，时，该值最大。代入p，当N为无穷大时，该值的极限为 1/e = 0.37。即最好情况下，时隙ALOHA的效率为 37%。</p>
<h4 id="（2）纯ALOHA（非时隙）">（2）纯ALOHA（非时隙）</h4>
<p>时隙ALOHA协议要求所有的节点同步他们的传输，以在每个时隙开始时开始传输，但第一个ALOHA协议实际上是一个非时隙、完全分散的协议（奇怪，那为什么不直接把这一小节放在第一个讲）。</p>
<p>无时隙ALOHA协议下，节点无需在时间上同步，当有帧需要传输时，可以马上传输，如下图所示：</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457e4b811ae.png" alt="10" style="zoom:50%;" />
<p>对于一个 t0 时间发送的帧，在[ t0 - 1，t0 + 1 ]区间内发送的帧都会与它发生碰撞。这个角度看，冲突区间似乎比时隙ALOHA协议增大了一倍，下面我们计算纯ALOHA的效率：</p>
<p>已知每个节点在一个单位时间内选择传输的概率为p，那么</p>
<mjx-container class="MathJax" jax="SVG" display="true" style="direction: ltr; display: block; text-align: center; margin: 1em 0; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="140.564ex" height="2.7ex" role="img" focusable="false" viewBox="0 -943.3 62129.1 1193.3" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(751,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mtext" transform="translate(1140,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">指</text><text data-variant="normal" transform="translate(1000,0) scale(1,-1)" font-size="884px" font-family="serif">定</text><text data-variant="normal" transform="translate(2000,0) scale(1,-1)" font-size="884px" font-family="serif">节</text><text data-variant="normal" transform="translate(3000,0) scale(1,-1)" font-size="884px" font-family="serif">点</text><text data-variant="normal" transform="translate(4000,0) scale(1,-1)" font-size="884px" font-family="serif">成</text><text data-variant="normal" transform="translate(5000,0) scale(1,-1)" font-size="884px" font-family="serif">功</text></g><g data-mml-node="mo" transform="translate(7140,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(7806.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(8862.6,0)"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(9613.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mtext" transform="translate(10002.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">节</text><text data-variant="normal" transform="translate(1000,0) scale(1,-1)" font-size="884px" font-family="serif">点</text><text data-variant="normal" transform="translate(2000,0) scale(1,-1)" font-size="884px" font-family="serif">传</text><text data-variant="normal" transform="translate(3000,0) scale(1,-1)" font-size="884px" font-family="serif">输</text></g><g data-mml-node="mo" transform="translate(14002.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(14613.8,0)"><path data-c="22C5" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(15114,0)"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(15865,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mtext" transform="translate(16254,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">其</text><text data-variant="normal" transform="translate(1000,0) scale(1,-1)" font-size="884px" font-family="serif">它</text><text data-variant="normal" transform="translate(2000,0) scale(1,-1)" font-size="884px" font-family="serif">节</text><text data-variant="normal" transform="translate(3000,0) scale(1,-1)" font-size="884px" font-family="serif">点</text><text data-variant="normal" transform="translate(4000,0) scale(1,-1)" font-size="884px" font-family="serif">在</text></g><g data-mml-node="mo" transform="translate(21254,0)"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z" style="stroke-width: 3;"/></g><g data-mml-node="msub" transform="translate(21532,0)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(394,-150) scale(0.707)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" style="stroke-width: 3;"/></g></g><g data-mml-node="mo" transform="translate(22551.8,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(23552,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(24052,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z" style="stroke-width: 3;"/></g><g data-mml-node="msub" transform="translate(24496.7,0)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(394,-150) scale(0.707)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" style="stroke-width: 3;"/></g></g><g data-mml-node="mo" transform="translate(25294.2,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z" style="stroke-width: 3;"/></g><g data-mml-node="mtext" transform="translate(25572.2,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">不</text><text data-variant="normal" transform="translate(1000,0) scale(1,-1)" font-size="884px" font-family="serif">传</text></g><g data-mml-node="mo" transform="translate(27572.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(28183.4,0)"><path data-c="22C5" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(28683.7,0)"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(29434.7,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mtext" transform="translate(29823.7,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">其</text><text data-variant="normal" transform="translate(1000,0) scale(1,-1)" font-size="884px" font-family="serif">它</text><text data-variant="normal" transform="translate(2000,0) scale(1,-1)" font-size="884px" font-family="serif">节</text><text data-variant="normal" transform="translate(3000,0) scale(1,-1)" font-size="884px" font-family="serif">点</text><text data-variant="normal" transform="translate(4000,0) scale(1,-1)" font-size="884px" font-family="serif">在</text></g><g data-mml-node="mo" transform="translate(34823.7,0)"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z" style="stroke-width: 3;"/></g><g data-mml-node="msub" transform="translate(35101.7,0)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(394,-150) scale(0.707)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" style="stroke-width: 3;"/></g></g><g data-mml-node="mo" transform="translate(35899.2,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z" style="stroke-width: 3;"/></g><g data-mml-node="msub" transform="translate(36343.9,0)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(394,-150) scale(0.707)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" style="stroke-width: 3;"/></g></g><g data-mml-node="mo" transform="translate(37363.7,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(38363.9,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(38863.9,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z" style="stroke-width: 3;"/></g><g data-mml-node="mtext" transform="translate(39141.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">不</text><text data-variant="normal" transform="translate(1000,0) scale(1,-1)" font-size="884px" font-family="serif">传</text></g><g data-mml-node="mo" transform="translate(41141.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width: 3;"/></g><g data-mml-node="mspace" transform="translate(41530.9,0)"/><g data-mml-node="mo" transform="translate(41808.7,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(42864.4,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(43589.7,0)"><path data-c="22C5" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(44089.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(44478.9,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(45201.1,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(46201.3,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z" style="stroke-width: 3;"/></g><g data-mml-node="msup" transform="translate(46704.3,0)"><g data-mml-node="mo"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width: 3;"/></g><g data-mml-node="TeXAtom" transform="translate(422,413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(888,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(1666,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"/></g></g></g><g data-mml-node="mo" transform="translate(48930.1,0)"><path data-c="22C5" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(49430.4,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(49819.4,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(50541.6,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(51541.8,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z" style="stroke-width: 3;"/></g><g data-mml-node="msup" transform="translate(52044.8,0)"><g data-mml-node="mo"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width: 3;"/></g><g data-mml-node="TeXAtom" transform="translate(422,413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(888,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(1666,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"/></g></g></g><g data-mml-node="mo" transform="translate(54326.2,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(55382,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(56107.2,0)"><path data-c="22C5" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(56607.4,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(56996.4,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(57718.6,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(58718.8,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z" style="stroke-width: 3;"/></g><g data-mml-node="msup" transform="translate(59221.8,0)"><g data-mml-node="mo"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width: 3;"/></g><g data-mml-node="TeXAtom" transform="translate(422,413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(500,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(889,0)"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(1777,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(2555,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(3055,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width: 3;"/></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; overflow: hidden; width: 100%;"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>P</mi><mo stretchy="false">(</mo><mtext>指定节点成功</mtext><mo stretchy="false">)</mo><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><mtext>节点传输</mtext><mo stretchy="false">)</mo><mo>⋅</mo><mi>P</mi><mo stretchy="false">(</mo><mtext>其它节点在</mtext><mo stretchy="false">[</mo><msub><mi>t</mi><mn>0</mn></msub><mo>−</mo><mn>1</mn><mo>,</mo><msub><mi>t</mi><mn>0</mn></msub><mo stretchy="false">]</mo><mtext>不传</mtext><mo stretchy="false">)</mo><mo>⋅</mo><mi>P</mi><mo stretchy="false">(</mo><mtext>其它节点在</mtext><mo stretchy="false">[</mo><msub><mi>t</mi><mn>0</mn></msub><mo>,</mo><msub><mi>t</mi><mn>0</mn></msub><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mtext>不传</mtext><mo stretchy="false">)</mo><mspace linebreak="newline"/><mo>=</mo><mi>p</mi><mo>⋅</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><msup><mo stretchy="false">)</mo><mrow data-mjx-texclass="ORD"><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>⋅</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><msup><mo stretchy="false">)</mo><mrow data-mjx-texclass="ORD"><mi>N</mi><mo>−</mo><mn>1</mn></mrow></msup><mo>=</mo><mi>p</mi><mo>⋅</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><msup><mo stretchy="false">)</mo><mrow data-mjx-texclass="ORD"><mn>2</mn><mo stretchy="false">(</mo><mi>N</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msup></math></mjx-assistive-mml></mjx-container><p>我们用同样的方式，可以求得当 p = 1/(2N-1) 时，P(指定节点成功) 的值取最大，为 1/2e = 0.175。</p>
<p>所以纯ALOHA协议的效率是17.5%，相比时隙ALOHA效率更低了。</p>
<h4 id="（3）CSMA（载波侦听多路访问）">（3）CSMA（载波侦听多路访问）</h4>
<p><strong>载波侦听多路访问（Carrier Sense Multiple Access，CSMA）</strong> 中的<strong>载波侦听</strong>是指，一个节点在传输前会先侦听信道，如果信道空闲，则传输整个帧，否则推迟传送，等到信道空闲再尝试传输。</p>
<p>但即使采用这种方式，仍然可能会发生碰撞，因为信号的传播存在延迟。</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457e55b47ba.png" alt="11" style="zoom:67%;" />
<p>上图中，t0时刻，节点B侦听到信道是空闲的，开始沿着广播媒体在两个方向上传播它的比特。在t1时刻，节点D有一个帧需要发送，虽然此时节点B正在传输，但是B传输的比特还没有到达，导致D误认为信道空闲，选择传输比特，最终发生碰撞，导致两个节点传输失败。</p>
<p>从这个过程中我们也可以看出，广播信道的端到端<strong>信道传播时延（channel propagation delay）</strong> 在决定其性能方面起到关键作用，该传播时延越长，载波侦听节点不能侦听到网络中另一个节点已经开始传输的概率越大。</p>
<blockquote>
<p><strong>CSMA 的侦听策略</strong></p>
<p>CSMA 协议中，节点发送数据的策略一般有如下三种：</p>
<ul class="lvl-1">
<li class="lvl-2">
<p><strong>1-坚持CSMA</strong>：节点发送数据前，如果侦听到信道忙，则<strong>继续侦听</strong>直到信道空闲，再发送数据。由于一监听到信道空闲就立即发送，所以信道的利用率较高，但多个节点同时发送导致冲突的可能性也较大。</p>
</li>
<li class="lvl-2">
<p><strong>非坚持CSMA</strong>：节点发送数据前，如果侦听到信道忙，则<strong>随机等待</strong>一个时间段后，再开始侦听。相较于1-坚持，非坚持CSMA降低了发生冲突的可能性，但同时也降低了信道的利用率。</p>
</li>
<li class="lvl-2">
<p><strong>p-坚持CSMA</strong>：该策略仅适用于分时隙的信道，主机在发送数据前，如果侦听到信道忙，则推迟到下一个时隙重新监听，如果信道空闲，则有<strong>p的概率立即发送数据</strong>，1-p的概率推迟到下一个时隙重新侦听。p-坚持CSMA既能有效减少冲突，又能比较充分的利用信道。</p>
</li>
</ul>
<p><strong>注</strong>：本部分内容书上并未出现，为笔者根据王道书籍做出的补充。</p>
</blockquote>
<h4 id="（4）CSMA-CD（冲突检测）">（4）CSMA/CD（冲突检测）</h4>
<p>CSMA/CD是具有<strong>碰撞检测（collision detection）</strong> 的载波侦听多路访问，这里的碰撞检测是指，当一个传输节点在传输时一直在侦听此信道，如果它检测到另一个节点正在传输干扰帧，它就停止传输，在重复“帧听 - 当空闲时传输”循环之前等待一段随机时间。</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457e5d0a00c.png" alt="12" style="zoom:67%;" />
<p>我们可以看到，在多路访问协议中加入碰撞检测后，通过不传输一个无用、损坏的帧，大大改善了协议的性能（降低损坏帧在信道中的滞留时间）。</p>
<p>CSMA/CD协议的整体运行流程如下：</p>
<p>1.适配器从网络层获得数据报，准备链路层帧。</p>
<p>2.在发送帧前，先侦听信道：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>信道空闲则开始传送帧。</p>
</li>
<li class="lvl-2">
<p>信道忙则等到信道空闲再发送。</p>
</li>
</ul>
<p>3.在传输过程中扔不停检测信道，即网络适配器要边发送边监听：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>没有检测到冲突则持续发送，直到成功发送完成。</p>
</li>
<li class="lvl-2">
<p>检测到冲突则放弃发送，之后尝试重发。</p>
</li>
</ul>
<p>4.发送方适配器在检测到冲突后，除了放弃传输之外，还会发送一个强化的人为干扰信号，确保所有的节点都能够得知发生的冲突。</p>
<p>5.放弃传输后，适配器执行退避算法，在以太网中，CSMA/CD协议执行二进制指数退避算法。</p>
<blockquote>
<p><strong>二进制指数退避算法</strong></p>
<ul class="lvl-1">
<li class="lvl-2">首次发生碰撞，节点在{0，1}之间选择一个数，记为K，选择等待K*512比特时间（对于100Mbps的以太网来说，512比特时间为5.12ms）后重新开始“侦听-当空闲时传输”。</li>
<li class="lvl-2">第二次碰撞后，节点在{0，1，2，3 }之间选择一个数，记为K，选择等待K*512比特时间后重新开始“侦听-当空闲时传输”。</li>
<li class="lvl-2">第三次碰撞后，节点在{0，1，2，3，4，5，6，7 }之间选择一个数，记为K，选择等待K*512比特时间后重新开始“侦听-当空闲时传输”。</li>
<li class="lvl-2">……</li>
</ul>
<p>每发生一次碰撞，窗口大小就会翻倍，碰撞概率会变低，但平均等待时间也会边长。</p>
<p>需要注意的是，二进制指数退避算法是<strong>分布式</strong>的算法，即每个节点之间独立计算自己的碰撞次数和窗口大小；同时该算法也是<strong>自适应</strong>的算法，负载较大时，重传窗口时间大，减少冲突，但等待时间长，负载较小时，各站点等待时间短，但冲突概率大。</p>
</blockquote>
<h4 id="（5）CSMA-CD效率">（5）CSMA/CD效率</h4>
<p>CSMA/CD效率的推导超出了本书的范畴，这里只给出下面的近似式子：</p>
<mjx-container class="MathJax" jax="SVG" display="true" style="direction: ltr; display: block; text-align: center; margin: 1em 0; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -3.281ex;" xmlns="http://www.w3.org/2000/svg" width="18.05ex" height="6.318ex" role="img" focusable="false" viewBox="0 -1342 7977.9 2792.4" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">效</text><text data-variant="normal" transform="translate(1000,0) scale(1,-1)" font-size="884px" font-family="serif">率</text></g><g data-mml-node="mo" transform="translate(2277.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width: 3;"/></g><g data-mml-node="mfrac" transform="translate(3333.6,0)"><g data-mml-node="mn" transform="translate(2072.2,676)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"/></g><g data-mml-node="mrow" transform="translate(220,-993.8)"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(722.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(1722.4,0)"><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z" style="stroke-width: 3;"/></g><g data-mml-node="mfrac" transform="translate(2222.4,0)"><g data-mml-node="msub" transform="translate(276.8,543.1) scale(0.707)"><g data-mml-node="mi"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z" style="stroke-width: 3;"/></g><g data-mml-node="TeXAtom" transform="translate(553,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mtext"><path data-c="70" d="M36 -148H50Q89 -148 97 -134V-126Q97 -119 97 -107T97 -77T98 -38T98 6T98 55T98 106Q98 140 98 177T98 243T98 296T97 335T97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 61 434T98 436Q115 437 135 438T165 441T176 442H179V416L180 390L188 397Q247 441 326 441Q407 441 464 377T522 216Q522 115 457 52T310 -11Q242 -11 190 33L182 40V-45V-101Q182 -128 184 -134T195 -145Q216 -148 244 -148H260V-194H252L228 -193Q205 -192 178 -192T140 -191Q37 -191 28 -194H20V-148H36ZM424 218Q424 292 390 347T305 402Q234 402 182 337V98Q222 26 294 26Q345 26 384 80T424 218Z" style="stroke-width: 3;"/><path data-c="72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z" transform="translate(556,0)" style="stroke-width: 3;"/><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(948,0)" style="stroke-width: 3;"/><path data-c="70" d="M36 -148H50Q89 -148 97 -134V-126Q97 -119 97 -107T97 -77T98 -38T98 6T98 55T98 106Q98 140 98 177T98 243T98 296T97 335T97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 61 434T98 436Q115 437 135 438T165 441T176 442H179V416L180 390L188 397Q247 441 326 441Q407 441 464 377T522 216Q522 115 457 52T310 -11Q242 -11 190 33L182 40V-45V-101Q182 -128 184 -134T195 -145Q216 -148 244 -148H260V-194H252L228 -193Q205 -192 178 -192T140 -191Q37 -191 28 -194H20V-148H36ZM424 218Q424 292 390 347T305 402Q234 402 182 337V98Q222 26 294 26Q345 26 384 80T424 218Z" transform="translate(1448,0)" style="stroke-width: 3;"/></g></g></g><g data-mml-node="msub" transform="translate(220,-345) scale(0.707)"><g data-mml-node="mi"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z" style="stroke-width: 3;"/></g><g data-mml-node="TeXAtom" transform="translate(553,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mtext"><path data-c="74" d="M27 422Q80 426 109 478T141 600V615H181V431H316V385H181V241Q182 116 182 100T189 68Q203 29 238 29Q282 29 292 100Q293 108 293 146V181H333V146V134Q333 57 291 17Q264 -10 221 -10Q187 -10 162 2T124 33T105 68T98 100Q97 107 97 248V385H18V422H27Z" style="stroke-width: 3;"/><path data-c="72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z" transform="translate(389,0)" style="stroke-width: 3;"/><path data-c="61" d="M137 305T115 305T78 320T63 359Q63 394 97 421T218 448Q291 448 336 416T396 340Q401 326 401 309T402 194V124Q402 76 407 58T428 40Q443 40 448 56T453 109V145H493V106Q492 66 490 59Q481 29 455 12T400 -6T353 12T329 54V58L327 55Q325 52 322 49T314 40T302 29T287 17T269 6T247 -2T221 -8T190 -11Q130 -11 82 20T34 107Q34 128 41 147T68 188T116 225T194 253T304 268H318V290Q318 324 312 340Q290 411 215 411Q197 411 181 410T156 406T148 403Q170 388 170 359Q170 334 154 320ZM126 106Q126 75 150 51T209 26Q247 26 276 49T315 109Q317 116 318 175Q318 233 317 233Q309 233 296 232T251 223T193 203T147 166T126 106Z" transform="translate(781,0)" style="stroke-width: 3;"/><path data-c="6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(1281,0)" style="stroke-width: 3;"/><path data-c="73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z" transform="translate(1837,0)" style="stroke-width: 3;"/></g></g></g><rect width="1741.9" height="60" x="120" y="220"/></g></g><rect width="4404.3" height="60" x="120" y="220"/></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; overflow: hidden; width: 100%;"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>效率</mtext><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><mn>5</mn><mfrac><msub><mi>d</mi><mrow data-mjx-texclass="ORD"><mtext>prop</mtext></mrow></msub><msub><mi>d</mi><mrow data-mjx-texclass="ORD"><mtext>trans</mtext></mrow></msub></mfrac></mrow></mfrac></math></mjx-assistive-mml></mjx-container><p>其中，d_prop表示信号能量在任意两个适配器之间传播所需的最大时间；d_trans表示传输一个最大长度的以太网帧的时间。可以看出，当d_prop变为0，或者d_trans变为无穷大时，效率为1。</p>
<p>总的来说，CSMA/CD有着比ALOHA更好的性能，且有着简单，廉价，分布式的优点。</p>
<h4 id="（6）CSMA-CA（碰撞避免）">（6）CSMA/CA（碰撞避免）</h4>
<p>在无线局域网（WLAN）中，由于电磁波在传播过程衰减较快，且在开放空间里，相同频段的电磁波之间干扰比较严重（噪声），传统的有线网络中的碰撞检测方法（如以太网中的CSMA/CD）难以正常应用，所以WLAN通常采用<strong>CSMA/CA（载波侦听多路访问/碰撞避免）</strong> 机制。</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457e671d3be.png" alt="13" style="zoom:67%;" />
<p>以上图为例，A和C发送的电磁波彼此之间无法正常到达，但都能发送到B。假设A，C同时向B发送帧，帧在B处发生碰撞，B无法正常接收。但A和C由于都无法收到对方的电磁波，所以未能检测到碰撞，所以WLAN中，<strong>未检测到冲突不等于发送成功</strong>。</p>
<p><strong>CSMA/CA</strong> 采用事前避免的方式减少碰撞的发生（并不能杜绝碰撞），具体实现方式如下：</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457e7103728.png" alt="14" style="zoom:67%;" />
<p>一个有数据发送需求的节点 sender 在侦测到信道空闲时，不会立即发送数据，而是等待DIFS长的时间，如果持续时间内信道一直处于空闲状态，则直接传输整个帧（无碰撞检测，不会终止传输，因此碰撞的代价也较大）；如果检测到信道忙碌，则会执行二进制指数退避算法，选择一个随机回退值，并在信道空闲时递减该值（信道忙碌时不会递减），当该值递减到0时（只会发生在信道空闲时，且立即发送数据帧，无需再等待 DIFS 时间），发送整个帧。</p>
<p>接收方收到帧后，如果帧正确，则会在SIFS后发送ACK。发送方如果没有收到ACK，则会增加回退值，重复上述步骤。</p>
<blockquote>
<p><strong>注意</strong>：由于无线链路的特性，需要每一帧都进行确认，例如我们在前面说的未检测到冲突不等于成功发送。这是链路层的可靠机制。</p>
</blockquote>
<p>CSMA/CA虽然采用了事前避免的方法，但依旧会出现冲突（且由于不会停止传输无用帧，导致冲突的代价较大），例如以下两种情况：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>两个站点相互隐藏</strong>：即我们前面提到的未检测到冲突不等于发送成功的例子。</p>
</li>
<li class="lvl-2">
<p><strong>两个站点选择了非常靠近的随机回退值</strong>：A的回退值到达0后发送帧，但是该信号还未到达B时，B的回退值也递减到0，选择发送帧，从而导致冲突。</p>
</li>
</ul>
<p><strong>预约机制</strong></p>
<p>CSMA/CA本身并不具有预约机制，但是它通过RTS/CTS（Request to Send / Clear to Send）机制间接实现了预约的效果，该机制作为一个可选项，一般用来降低长数据帧冲突的概率。</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457e797b5fc.png" alt="15" style="zoom: 80%;" />
<p>具体实现流程如上头所示，发送方首先使用CSMA向接收方发送一个较小的RTS分组（虽然该分组也可能会产生冲突，但由于比较小，对信道的浪费也较少）。接收方成功收到信号后，会广播CTS，作为对RTS的响应。CST能够被所有的节点听到，完成广播后，发送方开始发送数据帧，而其他节点抑制发送。当接收方成功收到数据帧后，会向接收方发送ACK确认帧，表示传输完成。A收到ACK后，信道自动释放，回归信道竞争状态。</p>
<h3 id="4-轮流协议">4.轮流协议</h3>
<h4 id="（1）简介">（1）简介</h4>
<p><strong>信道划分协议</strong>在高负载下是有效和公平的，但是低负载下由于节点速率被限制在R/N，因此效率较低；</p>
<p><strong>随机访问协议</strong>在低负载时效率高，单个节点可以完全利用信道带宽，但在高负荷情况下冲突概率大，效率低。</p>
<p>而<strong>轮流协议（taking-turns protocol）</strong> 集成了两者的优点，在低负载和高负载情况下都能有着较高的效率（但具体实现比较复杂）。</p>
<p>比较重要的两种轮流协议有：<strong>轮询协议（polling protocol）</strong> 和<strong>令牌传递协议（token-passing protocol）</strong>。</p>
<h4 id="（2）轮询协议">（2）轮询协议</h4>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457e81df5ce.png" alt="16" style="zoom: 50%;" />
<p>轮询协议如上图所示，一个节点被指定为主节点，主节点依次询问每个节点，告诉它能够传输的帧的最多数量。一个节点传输完成（也可能没有数据帧要传输或者传输达到上限）后，主节点就会开始询问下一个节点，一次轮流执行。</p>
<p>很显然，整个过程都由主节点控制，因此这种方法存在单点故障问题，一旦主节点故障，整个信道都会变得不可操作。</p>
<h4 id="（3）令牌传递协议">（3）令牌传递协议</h4>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457e8ad0237.png" alt="17" style="zoom: 67%;" />
<p>令牌传递协议如上图所示，该协议没有主节点。一个称为令牌（token）的小的特殊帧在节点之间以某种固定的次序进行交换。如果某节点持有令牌并有数据要发送，它将占用令牌并发送数据，当发送完成或者超时，节点释放令牌并将其传递给下一个节点。</p>
<p>令牌传递协议依旧存在单点故障问题，例如令牌可能会在传递的过程中丢失，这时必须调用某些复杂的机制来检查和恢复令牌。</p>
<h3 id="5-电缆接入网络">5.电缆接入网络</h3>
<p><strong>DOCSIS（Data Over Cable Service Interface Specification，电缆数据服务接口规范）</strong> 定义了电缆数据网络体系结构及其协议。在电缆接入网中，我们将同时看到前面所讲的多种多路访问协议。</p>
<p>下图中为一个电缆接入网示例，在电缆网头将几千个住宅电缆调制解调器与一个<strong>电缆调制解调器端接系统（Cable Modem Termination System，CMTS）</strong> 连接。</p>
<blockquote>
<p><strong>注</strong>：<strong>调制解调器（Modem）</strong> 是一种将数字信号与模拟信号相互转换的设备，用于实现计算机和其他数字设备的网络接入。“调制”指数据从计算机发送到网络时，将计算机的数字信号转换成模拟信号；“解调”指数据从网络接收到计算机时，把收到的模拟信号转换回数字信号。</p>
</blockquote>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457e948e9dd.png" alt="18" style="zoom:67%;" />
<p>电缆接入网络分为下行信道（CMTS到调制解调器）和上行信道（调制解调器到CMTS），两者均为广播信道。DOCSIS使用FDM将上行和下行网络段划分为多个频率信道，每个下行信道带宽6MHz，吞吐量为40Mbps，每个上行信道带宽6.4MHz，吞吐量为30Mbps。</p>
<p>下行信道上，由于只有CMTS传输数据，因此不存在多路访问题。CMTS在下行信道上向所有用户广播称为MAP报文的控制报文，来为每个电缆调制解调器指定能够在上行信道中使用的微时隙。由于每个微时隙明确分配给电缆调制解调器，故CMTS能够确保在微时隙中没有碰撞传输。</p>
<p>那么CMTS是根据什么来分配微时隙的呢？</p>
<p>在下行信道划分的微时隙中，有一组特殊的微时隙专门用于让有数据发送需求的用户发送微时隙请求帧。这些来自各个用户的微时隙请求帧，会以随机接入的方式在这组特殊的微时隙中传输，因此可能会发送碰撞。但用户无法检测碰撞，只能通过观察下一个下行控制报文中是否有对自己请求分配的响应来判断是否发送碰撞。如果没有，则执行二进制指数退避算法将自己的的微时隙请求帧延缓到以后的时隙重新发送。</p>
<p>在流量较低的情况下，用户可能会在名义上分配给微时隙请求帧的时隙内直接传输数据帧，从而避免等待额外的请求分配，减少延迟，提高带宽的利用率。</p>
<blockquote>
<p><strong>注</strong>：电缆接入网络中，同时使用了FDM、TDM、随机接入和集中分配时隙多个多路访问协议。</p>
</blockquote>
<h2 id="四、交换局域网">四、交换局域网</h2>
<h3 id="1-MAC地址和ARP">1.MAC地址和ARP</h3>
<h4 id="（1）MAC地址和IP地址">（1）MAC地址和IP地址</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>IP地址</strong>是网络层地址，32bit（IPv6为128位），是分层的，能够实现路由聚集。用于完成网络到网络的交付。</p>
</li>
<li class="lvl-2">
<p><strong>MAC地址</strong>是链路层地址，48比特。是平面的，仅用来区分一个网络内的不同网卡，任何两个网卡的MAC地址都不相同。用于完成一个物理网络内部节点到节点的数据交付。</p>
</li>
</ul>
<blockquote>
<p><strong>注意</strong>：链路层地址有多种称呼：LAN地址、物理地址或MAC地址，这里选取最流行的MAC地址。此外拥有MAC地址的并不是主机或路由器，而是他们的网络适配器。</p>
</blockquote>
<p>MAC地址和IP地址分离的好处：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>保持各层独立。局域网是为任意网络层协议设计的，将MAC地址和IP地址分离开，使其除了IP之外，还可以方便地支持其他网络层协议，如IPX等。</p>
</li>
<li class="lvl-2">
<p>更换网卡时可以不必改变IP地址，可以直接与新网卡的MAC地址建立映射关系。</p>
</li>
</ul>
<h4 id="（2）ARP">（2）ARP</h4>
<p><strong>地址解析协议（Address Resolution Protocol，ARP）</strong> 用于将IP地址解析为MAC地址。逆地址解析协议RARP用于将MAC地址解析为IP地址，但是它的功能已被DHCP取代，当前不再使用。</p>
<blockquote>
<p><strong>注意</strong>：虽然自定向下这本书中并未明确指出，但我们一般认为<strong>ARP是网络层协议</strong>。</p>
</blockquote>
<p>下面介绍ARP在一个子网内部的运行流程：</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457ea30acd3.png" alt="19" style="zoom:67%;" />
<p>如上的一个局域网中每个接口都有一个IP地址和MAC地址，假设主机C想要向主机A发送IP数据报。发送数据报时，主机C除了需要向它的网络适配器提供IP数据报外，还需要提供目的地的MAC地址，然后适配器将构造一个包含目的地的MAC地址的链路层帧，并把该帧发送进局域网。而目标主机MAC地址的获取就是ARP需要完成的任务。</p>
<p>主机C在其ARP模块上以主机A的IP地址<code>222.222.222.222</code>作为输入，就会返回相应的MAC地址。每个主机上维护者一个ARP表，而主机C上的ARP表可能如下图所示：</p>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457eaf2f805.png" alt="20"></p>
<p>图中的TTL为该表项的寿命值，一个表项通常的过期时间为20分钟。</p>
<p>可以看到ARP表上并不包含该子网内的所有主机和路由器，需要查询的目标地址A的MAC地址并不在表项中，那么主机C会向它的适配器传递一个ARP查询分组，该分组的目标地址为<strong>MAC广播地址（即FF-FF-FF-FF-FF-FF）</strong>，子网内的所有地址都会收到该查询分组。当主机A收到该查询分组后（分组里有主机A的IP地址），会把自己的MAC地址放在ARP响应分组里，通过单播的形式发送给主机C。然后主机C将得到的映射关系存储更新在自己的ARP表中。</p>
<blockquote>
<p><strong>注意</strong>：ARP协议是即插即用的，即一个ARP表是自动建立的，并不需要网络管理员来进行配置。</p>
</blockquote>
<h4 id="（3）向子网外发送数据报">（3）向子网外发送数据报</h4>
<p>另一个更复杂的情况是向子网外的节点发送数据报，如下图所示，图中是由一台路由器连接的两个子网（可以看到这里路由器有两个接口，所以它有两个IP地址、两个ARP模块、两个适配器和两个MAC地址）：</p>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457ebdcb0f8.png" alt="21"></p>
<p>假设IP为<code>111.111.111.111</code>的主机A准备向另一个子网里IP为<code>222.222.222.222</code>的主机B发送数据报。主机A将数据报交付给它的适配器时，需要指示一个适当的MAC地址。该地址并不是主机B的MAC地址（因为主机B并不在当前子网内），而是下一跳路由器<code>111.111.111.110</code>的MAC地址。通过ARP得到该MAC地址后，封装链路层帧（该帧包含了寻址到主机B的数据报），并发送出去。路由器发现该帧是向自己寻址的，于是进行接收，然后解封装。读取到数据报的目标IP后，结合自己的转发表找到转发端口应该为<code>222.222.222.220</code>。该端口再把这个数据报进行封装，MAC地址为目标主机B的MAC地址（因为此时已经和目标主机位于同一子网，且依旧使用ARP获得MAC地址）。</p>
<h3 id="2-以太网">2.以太网</h3>
<blockquote>
<p>以太网是目前最主流的局域网技术，由IEEE 802.3标准定义，采用无连接的工作方式，不对发送的数据帧编号，提供无连接不可靠的服务。</p>
</blockquote>
<h4 id="（1）以太网帧结构">（1）以太网帧结构</h4>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457ecbca5cf.png" alt="22"></p>
<p>以太网帧的结构分为如下六个字段：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>前同步码（8字节）</strong>：也叫前导码，位于以太网帧的最前面，该字段的前7个字节的值都是<code>10101010</code>，最后一个字节是<code>10101011</code>。前七个字节用于同步发送方和接收方的始终，第八关字节的最后两个比特（第一次出现的两个连续的1）警告接收方“重要的内容”要来了。</p>
</li>
<li class="lvl-2">
<p><strong>目的地址（6字节）</strong>：适配器收到除以自己和广播地址为目的地址之外的帧都会丢弃。</p>
</li>
<li class="lvl-2">
<p><strong>源地址（6字节）</strong>：传输该帧到局域网上的适配器的MAC地址。</p>
</li>
<li class="lvl-2">
<p><strong>类型字段（2字节）</strong>：类型字段允许以太网复用多种网络层协议（主机能够使用除了IP以外的其他网络层协议）。</p>
</li>
<li class="lvl-2">
<p><strong>数据字段（46~1500字节）</strong>：该字段承载了IP数据报，以太网的最大传输单元MTU是1500字节，超过则需要进行分片。数据字段的最小长度是46字节，不足则需要填充到46字节（网络层可以使用IP数据报首部中的长度字段去除填充部分）。</p>
</li>
<li class="lvl-2">
<p><strong>CRC（4字节）</strong>：循环冗余校验码。</p>
</li>
</ul>
<p>标准以太网帧的长度最短为64字节，最长为1518字节（均不计入前导码）。</p>
<blockquote>
<p><strong>注意</strong>：虽然以太网帧有CRC码，但它向网络层提供的依旧是不可靠的服务，因为即使通过校验，接收方也不会发送确认帧；没通过校验，接收方也不会发送否定确认帧，只是直接丢弃该帧。所以发送方并不知道它传输的帧是否成功达到并通过校验。这有助于降低以太网的复杂度和成本，但可能导致传递到网络层的数据报流存在间隙。UDP会无视这些间隙（导致应用层会看到数据中的间隙），但TCP不会对有间隙的数据报进行确认，从而执行重传。但以太网并不知道自己传输的是一个新的数据报还是被重传的数据报。</p>
</blockquote>
<h4 id="（2）以太网的标准">（2）以太网的标准</h4>
<p>以太网有很多不同的标准，但采用相同的MAC协议和帧结构（这里的MAC协议指介质访问控制协议）：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>不同的速率：10 Mbps、100Mbps、1Gbps、10Gbps</p>
</li>
<li class="lvl-2">
<p>不同的物理层媒介：光纤、同轴电缆和双绞</p>
</li>
</ul>
<p>以太网的标准有：如10BASE-T、10BASE-2.、100BASE-T、1000BASE-LX和10GBASE-T等等。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>其中前面的数字10、100、1000、10G分表代表该标准的速率；</p>
</li>
<li class="lvl-2">
<p>BASE表示使用基带传输，意味没有使用频分复用技术，每一个信号在单一频率上完全控制线缆</p>
</li>
<li class="lvl-2">
<p>最后一部分指不同物理媒体本身：T表示双绞线（Twisted Pair），F表示光纤（optical Fiber），2表示细同轴电缆，5表示粗同轴电缆，LX代表适合长距离传输的光纤（Long Wavelength），SX代表适合短距离传输的光纤（Short Wavelength）（这里的X并不代表具体的单词，而是一个惯例符号，被用来标识光纤模式）。</p>
</li>
</ul>
<p>以太网工作在半双工方式使用二进制指数退避的CSMA/CD算法，在全双工方式下，每个连接都有独立的发送和接收通道，几乎不会产生碰撞。</p>
<h4 id="（3）总线以太网和星形以太网">（3）总线以太网和星形以太网</h4>
<p>总线以太网使用二进制指数退避的CSMA/CD协议，以半双工方式工作。</p>
<p>但是随着以太网站点数目的增多，总线结构以太网的可靠性下降，同时大规模集成电路以及专用芯片的发展使得星形结构的以太网交换可以做得便宜又可靠，于是采用以太网交换机的星形结构成为了以太网的首选拓扑，解决了以太网在高负载时性能差的问题。</p>
<p>星形以太网不使用共享总线，没有碰撞问题，因此不使用CSMA/CD协议，而是以全双工方式工作。之所以还保留以太网的称呼，是因为它的帧结构未改变，仍采用以太网的帧结构。</p>
<h4 id="（4）吉比特以太网">（4）吉比特以太网</h4>
<p>吉比特以太网也叫千兆以太网，它的标准IEEE 802.3z有以下几个特点：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>允许1 Gbit/s下以全双工和半双工两种方式工作。</p>
</li>
<li class="lvl-2">
<p>使用IEEE 802.3协议规定的帧格式（即传统以太网的帧格式）。</p>
</li>
<li class="lvl-2">
<p>在半双工方式下使用CSMA/CD协议，而在双全工方式不使用CSMA/CD协议。</p>
</li>
<li class="lvl-2">
<p>与10BASE-T和100BASE-T技术向后兼容。</p>
</li>
</ul>
<p>吉比特以太网在半双工方式时必须进行碰撞检测，由于数据率提高了，因此只有减小最大电缆长度或增大帧的最小长度，才能使帧的传输时间大于等于信号在最大传输距离上的往返时间。</p>
<blockquote>
<p><strong>注意</strong>：CSMA/CD协议中，必须满足帧的传输时间大于等于信号在最大传输距离上的往返时间，才能确保为检测到碰撞等于发送成功。否则可能出现发送方还未收到远处传来的碰撞信号就已经完成了帧的传输，从而误以为帧已经发送成功。这也是以太网最小帧长为64字节的由来。</p>
</blockquote>
<p>为了解决这种问题，吉比特以太网采用了<strong>载波延伸（carrier extension）</strong> 方法，使最短帧长仍为64字节（保持兼容性），同时将争用期增大为512字节（传统以太网的为512位）。如果发送的MAC帧长不足512字节，就用一些特殊字段填充在帧的后面，使MAC帧的发送长度增大到512字节，这对有效负荷并无影响。接收端收到MAC帧后，把填充的特殊字段删除后才向高层交付。</p>
<p>但把原来仅64字节的短帧填充到512字节，额外的填充字段给链路层造成了很大开销，为此，吉比特以太网还增加了<strong>分组突发（packet bursting）</strong> 功能。及当有多个短帧要发送时，第一个短帧要采用载波延伸的方法进行填充，但随后的一些短帧则可一个接一个方式，他们之间只留必要的帧间最小间隔即可。这样就形成了一串分组的突发，直到到达1500字节或稍多一些为止。</p>
<p>吉比特以太网工作在全双工方式时，不使用载波延伸和分组突发。</p>
<h3 id="3-交换机">3.交换机</h3>
<blockquote>
<p>交换机是链路层设备，用MAC地址转发分组，其自身对于子网中的主机和路由器来说是透明度的。</p>
</blockquote>
<h4 id="（1）交换机转发和过滤">（1）交换机转发和过滤</h4>
<p><strong>过滤（filtering）</strong> 决定一个帧应该转发到某个接口还是应当将其丢弃的交换机功能。</p>
<p><strong>转发（forwarding）</strong> 是决定一个帧应该被导向哪个接口，并把该帧移动到那些接口的交换机功能。</p>
<p>交换机的两个功能都依赖于<strong>交换机表（switch table）</strong> 完成。交换机表中的一个表项包括：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>一个MAC地址。</p>
</li>
<li class="lvl-2">
<p>通向该MAC地址的交换机接口。</p>
</li>
<li class="lvl-2">
<p>表项放置在表中的时间。</p>
</li>
</ul>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457ed8bf2c2.png" alt="23"></p>
<p>当一个目的地址为<code>DD-DD-DD-DD-DD-DD</code>的帧从交换机接口 x 到达，交换机用该MAC地址在它的表里进行索引。有3种可能的情况：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>表中没有该表项。交换机会将该帧泛洪到所有端口（除了接收该帧的端口x），即将帧转发到除入口端口以外的所有接口。</p>
</li>
<li class="lvl-2">
<p>表中有一个表项将该MAC地址与接口 x（即进来时的接口）联系起来。不会转发，而是直接丢弃该帧。</p>
</li>
<li class="lvl-2">
<p>表中有一个表项将该MAC地址与非 x 的的接口联系起来。将帧转发到该MAC地址对应的端口，而不会泛洪。这是正常的单播转发操作。</p>
</li>
</ul>
<h4 id="（2）自学习">（2）自学习</h4>
<p>交换机是<strong>自学习（self-learning）</strong> 的，即它的表是自动，动态和自治地建立的，不需要来自网络管理员和配置协议的任何干预。实现过程如下：</p>
<ol>
<li class="lvl-3">
<p>交换机表初始为空。</p>
</li>
<li class="lvl-3">
<p>对于在每个接口收到的帧，交换机会在其表中存储：a.源MAC地址；b.接口信息（将源MAC地址和对应的接口进行关联并记录，以便在之后需要转发到该地址时知道帧应该从哪个接口发送）；c.老化期。</p>
</li>
<li class="lvl-3">
<p>如果在老化期内，交换机没有收到以该地址作为源地址的帧，就在表中删除这个地址（以这种方式，如果一台主机更换了网卡，那么旧的MAC地址最终会被从该交换机表中清除掉）。</p>
</li>
</ol>
<p>因为交换机不需要网络管理员或用户的干预，因此交换机是<strong>即插即用设备（plug-and-play device）</strong>。此外交换机也是<strong>全双工的</strong>，即任何交换机接口都能够同事发送和接收。</p>
<blockquote>
<p><strong>注意</strong>：学到这里可能觉得和前面讲到的ARP表的维护有些类似，ARP虽然也是即插即用的，但并不是自学习的。因为ARP的工作依赖于设备主动发送ARP请求来获得地址映射信息，而交换机是被动地从流经的帧中学习。</p>
</blockquote>
<p><strong>笔者的碎碎念</strong>：</p>
<p>写到这里，对 TopDown 的学习也就告一段落了，写这些东西确实花了不少时间，但能够有始有终地做完这些，是一件值得开心的事情。本以为在这之后已经对计网有了比较清晰的了解，结果去看了408的几道题后，直接道心破碎（悲鸣）。只能说408考察的深度和广度都不是学校的期末考试所能比拟的，未来还有很长的路要走，一切都才刚刚起步。</p>
<p>最后，来只可爱的利欧路吧！(づ￣ ³￣)づ</p>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/26/67457ee3ac1de.png" alt="利欧路"></p>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>《计算机网络 自顶向下方法》笔记：第六章 链路层和局域网</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://aoxuexinghuo.github.io/2024/10/29/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%20%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95%E3%80%8B%E7%AC%94%E8%AE%B0%EF%BC%9A%E7%AC%AC%E5%85%AD%E7%AB%A0%20%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/">https://aoxuexinghuo.github.io/2024/10/29/《计算机网络 自顶向下方法》笔记：第六章 链路层和局域网/</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>作者</h><div class="post-copyright-cc-info"><h>℡傲雪&amp;星火ぴ</h></div></div><div class="post-copyright-c"><h>发布于</h><div class="post-copyright-cc-info"><h>2024-10-29</h></div></div><div class="post-copyright-u"><h>更新于</h><div class="post-copyright-cc-info"><h>2025-03-26</h></div></div><div class="post-copyright-c"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%AC%94%E8%AE%B0/">笔记</a><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></div><div class="post-share"><div class="social-share" data-image="https://bu.dusays.com/2024/11/27/6746e041bb5c4.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/10/24/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%20%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95%E3%80%8B%E7%AC%94%E8%AE%B0%EF%BC%9A%E7%AC%AC%E4%BA%94%E7%AB%A0%20%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/" title="《计算机网络 自顶向下方法》笔记：第五章 网络层：控制平面"><img class="cover" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/27/6746e041bb5c4.jpg" onerror="onerror=null;src='https://bu.dusays.com/2024/11/28/674845666d85e.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">《计算机网络 自顶向下方法》笔记：第五章 网络层：控制平面</div></div><div class="info-2"><div class="info-item-1"> 🚥计算机网络 自顶向下方法 系列文章导航🚥 《计算机网络 自顶向下方法》笔记：第一章 计算机网络和因特网《计算机网络 自顶向下方法》笔记：第二章 应用层《计算机网络 自顶向下方法》笔记：第三章 传输层《计算机网络 自顶向下方法》笔记：第四章 网络层：数据平面《计算机网络 自顶向下方法》笔记：第五章 网络层：控制平面《计算机网络 自顶向下方法》笔记：第六章 链路层和局域网  一、概述 1.传统方式与SDN方式 在上一章的学习里我们了解到转发表（基于目的的转发）和流表（通用转发）是链接网络层的数据平面和控制平面的首要元素。这些表定义了一台路由器的本地数据平面转发行为，而在通用转发下，所采取的动作还包括丢弃一个分组、复制一个分组和重写第2、3或4层分组首部字段。 在本章中，我们将关注这些转发表和流表是如何计算、维护和安装的。实际上我们已经了解到在传统方式下和 SDN...</div></div></div></a><a class="pagination-related" href="/2024/11/11/%E8%8B%B1%E8%AF%AD%E7%BF%BB%E8%AF%91%E7%BB%83%E4%B9%A0/" title="英语翻译练习"><img class="cover" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/12/12/675ada6fc39ad.jpg" onerror="onerror=null;src='https://bu.dusays.com/2024/11/28/674845666d85e.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">英语翻译练习</div></div><div class="info-2"><div class="info-item-1">整理的一些英语翻译练习。</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2024/09/22/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%20%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95%E3%80%8B%E7%AC%94%E8%AE%B0%EF%BC%9A%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E5%9B%A0%E7%89%B9%E7%BD%91/" title="《计算机网络 自顶向下方法》笔记：第一章 计算机网络和因特网"><img class="cover" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/27/6746e02b1d09c.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-09-22</div><div class="info-item-2">《计算机网络 自顶向下方法》笔记：第一章 计算机网络和因特网</div></div><div class="info-2"><div class="info-item-1">有种高中生物的美。</div></div></div></a><a class="pagination-related" href="/2024/09/26/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%20%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95%E3%80%8B%E7%AC%94%E8%AE%B0%EF%BC%9A%E7%AC%AC%E4%B8%89%E7%AB%A0-%E4%BC%A0%E8%BE%93%E5%B1%82/" title="《计算机网络 自顶向下方法》笔记：第三章 传输层"><img class="cover" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/27/6746e02b1d09c.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-09-26</div><div class="info-item-2">《计算机网络 自顶向下方法》笔记：第三章 传输层</div></div><div class="info-2"><div class="info-item-1"> 🚥计算机网络 自顶向下方法 系列文章导航🚥 《计算机网络 自顶向下方法》笔记：第一章 计算机网络和因特网《计算机网络 自顶向下方法》笔记：第二章 应用层《计算机网络 自顶向下方法》笔记：第三章 传输层《计算机网络 自顶向下方法》笔记：第四章 网络层：数据平面《计算机网络 自顶向下方法》笔记：第五章 网络层：控制平面《计算机网络 自顶向下方法》笔记：第六章...</div></div></div></a><a class="pagination-related" href="/2024/09/22/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%20%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E6%96%B9%E6%B3%95%E3%80%8B%E7%AC%94%E8%AE%B0%EF%BC%9A%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E5%BA%94%E7%94%A8%E5%B1%82/" title="《计算机网络 自顶向下方法》笔记：第二章 应用层"><img class="cover" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/27/6746e04015924.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-09-22</div><div class="info-item-2">《计算机网络 自顶向下方法》笔记：第二章 应用层</div></div><div class="info-2"><div class="info-item-1"> 🚥计算机网络 自顶向下方法 系列文章导航🚥 《计算机网络 自顶向下方法》笔记：第一章 计算机网络和因特网《计算机网络 自顶向下方法》笔记：第二章 应用层《计算机网络 自顶向下方法》笔记：第三章 传输层《计算机网络 自顶向下方法》笔记：第四章 网络层：数据平面《计算机网络 自顶向下方法》笔记：第五章 网络层：控制平面《计算机网络 自顶向下方法》笔记：第六章 链路层和局域网  一、应用层协议原理 1.网络应用程序体系结构 （1）客户-服务器体系结构（client-server...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%BC%95%E8%AE%BA%E5%92%8C%E6%9C%8D%E5%8A%A1"><span class="toc-text">一、引论和服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BD%91%E7%BB%9C%E8%8A%82%E7%82%B9%E7%9A%84%E8%BF%9E%E6%8E%A5%E6%96%B9%E5%BC%8F"><span class="toc-text">1.网络节点的连接方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%93%BE%E8%B7%AF%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1"><span class="toc-text">2.链路层提供的服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%93%BE%E8%B7%AF%E5%B1%82%E5%AE%9E%E7%8E%B0%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-text">3.链路层实现的位置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%B7%AE%E9%94%99%E6%A3%80%E6%B5%8B%E5%92%8C%E7%BA%A0%E6%AD%A3"><span class="toc-text">二、差错检测和纠正</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%9C%BA%E6%99%AF%E4%BB%8B%E7%BB%8D"><span class="toc-text">1.场景介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%A5%87%E5%81%B6%E6%A0%A1%E9%AA%8C"><span class="toc-text">2.奇偶校验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%A3%80%E9%AA%8C%E5%92%8C%E6%96%B9%E6%B3%95"><span class="toc-text">3.检验和方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%BE%AA%E7%8E%AF%E5%86%97%E4%BD%99%E6%A3%80%E6%B5%8B"><span class="toc-text">4.循环冗余检测</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%A4%9A%E7%82%B9%E8%AE%BF%E9%97%AE%E9%93%BE%E8%B7%AF%E5%92%8C%E5%8D%8F%E8%AE%AE"><span class="toc-text">三、多点访问链路和协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%AE%80%E4%BB%8B"><span class="toc-text">1.简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BF%A1%E9%81%93%E5%88%92%E5%88%86%E5%8D%8F%E8%AE%AE"><span class="toc-text">2.信道划分协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%9A%8F%E6%9C%BA%E6%8E%A5%E5%85%A5%E5%8D%8F%E8%AE%AE"><span class="toc-text">3.随机接入协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E6%97%B6%E9%9A%99ALOHA"><span class="toc-text">（1）时隙ALOHA</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E7%BA%AFALOHA%EF%BC%88%E9%9D%9E%E6%97%B6%E9%9A%99%EF%BC%89"><span class="toc-text">（2）纯ALOHA（非时隙）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89CSMA%EF%BC%88%E8%BD%BD%E6%B3%A2%E4%BE%A6%E5%90%AC%E5%A4%9A%E8%B7%AF%E8%AE%BF%E9%97%AE%EF%BC%89"><span class="toc-text">（3）CSMA（载波侦听多路访问）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89CSMA-CD%EF%BC%88%E5%86%B2%E7%AA%81%E6%A3%80%E6%B5%8B%EF%BC%89"><span class="toc-text">（4）CSMA&#x2F;CD（冲突检测）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%885%EF%BC%89CSMA-CD%E6%95%88%E7%8E%87"><span class="toc-text">（5）CSMA&#x2F;CD效率</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%886%EF%BC%89CSMA-CA%EF%BC%88%E7%A2%B0%E6%92%9E%E9%81%BF%E5%85%8D%EF%BC%89"><span class="toc-text">（6）CSMA&#x2F;CA（碰撞避免）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%BD%AE%E6%B5%81%E5%8D%8F%E8%AE%AE"><span class="toc-text">4.轮流协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E7%AE%80%E4%BB%8B"><span class="toc-text">（1）简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E8%BD%AE%E8%AF%A2%E5%8D%8F%E8%AE%AE"><span class="toc-text">（2）轮询协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E4%BB%A4%E7%89%8C%E4%BC%A0%E9%80%92%E5%8D%8F%E8%AE%AE"><span class="toc-text">（3）令牌传递协议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E7%94%B5%E7%BC%86%E6%8E%A5%E5%85%A5%E7%BD%91%E7%BB%9C"><span class="toc-text">5.电缆接入网络</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E4%BA%A4%E6%8D%A2%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-text">四、交换局域网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-MAC%E5%9C%B0%E5%9D%80%E5%92%8CARP"><span class="toc-text">1.MAC地址和ARP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89MAC%E5%9C%B0%E5%9D%80%E5%92%8CIP%E5%9C%B0%E5%9D%80"><span class="toc-text">（1）MAC地址和IP地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89ARP"><span class="toc-text">（2）ARP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E5%90%91%E5%AD%90%E7%BD%91%E5%A4%96%E5%8F%91%E9%80%81%E6%95%B0%E6%8D%AE%E6%8A%A5"><span class="toc-text">（3）向子网外发送数据报</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-text">2.以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%B8%A7%E7%BB%93%E6%9E%84"><span class="toc-text">（1）以太网帧结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84%E6%A0%87%E5%87%86"><span class="toc-text">（2）以太网的标准</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E6%80%BB%E7%BA%BF%E4%BB%A5%E5%A4%AA%E7%BD%91%E5%92%8C%E6%98%9F%E5%BD%A2%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-text">（3）总线以太网和星形以太网</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E5%90%89%E6%AF%94%E7%89%B9%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-text">（4）吉比特以太网</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-text">3.交换机</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E4%BA%A4%E6%8D%A2%E6%9C%BA%E8%BD%AC%E5%8F%91%E5%92%8C%E8%BF%87%E6%BB%A4"><span class="toc-text">（1）交换机转发和过滤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E8%87%AA%E5%AD%A6%E4%B9%A0"><span class="toc-text">（2）自学习</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url(https://bu.dusays.com/2024/11/27/6746e02939613.jpg);"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By ℡傲雪&星火ぴ</div><div class="footer_custom_text">有一天，我看了四十四次日落！你知道的，当一个人情绪低落的时候，他会格外喜欢看日落。 —— 《小王子》</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const loadMathjax = () => {
    if (!window.MathJax) {
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          tags: 'none',
        },
        chtml: {
          scale: 1.1
        },
        options: {
          enableMenu: true,
          renderActions: {
            findScript: [10, doc => {
              for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
                const display = !!node.type.match(/; *mode=display/)
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
                const text = document.createTextNode('')
                node.parentNode.replaceChild(text, node)
                math.start = {node: text, delim: '', n: 0}
                math.end = {node: text, delim: '', n: 0}
                doc.math.push(math)
              }
            }, '']
          }
        }
      }
      
      const script = document.createElement('script')
      script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
      script.id = 'MathJax-script'
      script.async = true
      document.head.appendChild(script)
    } else {
      MathJax.startup.document.state(0)
      MathJax.texReset()
      MathJax.typesetPromise()
    }
  }

  btf.addGlobalFn('encrypt', loadMathjax, 'mathjax')
  window.pjax ? loadMathjax() : window.addEventListener('load', loadMathjax)
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.isShuoshuo
  const option = null

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://aoxue-comment.tateishishima.site/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://aoxue-comment.tateishishima.site/',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer src="/js/sakura.js"></script><script src="/js/live2d.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://aoxuexinghuo.github.io/categories/计算机组成原理/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📚 计算机组成原理 (7)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://aoxuexinghuo.github.io/categories/操作系统/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">‍📓 操作系统 (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://aoxuexinghuo.github.io/categories/计算机网络/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📒 计算机网络 自顶向下 (7)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://aoxuexinghuo.github.io/categories/Vue/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">‍💻 Vue2个人笔记 (7)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><a class="magnet_link_more"  href="https://aoxuexinghuo.github.io/categories" style="flex:1;text-align: center;margin-bottom: 10px;">查看更多...</a></div></div>';
    console.log('已挂载magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(50% - 5px);background: #f2f2f2;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: #b30070}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/12/31/英二真题精读/" alt=""><img width="48" height="48" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/12/31/6773e03fd49f8.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-26</span><a class="blog-slider__title" href="2024/12/31/英二真题精读/" alt="">英二真题精读</a><div class="blog-slider__text">没有一篇文章是白背的（</div><a class="blog-slider__button" href="2024/12/31/英二真题精读/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/02/22/数二 随笔/" alt=""><img width="48" height="48" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/19/67daad7eb1caa.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-26</span><a class="blog-slider__title" href="2025/02/22/数二 随笔/" alt="">数二 随笔</a><div class="blog-slider__text">每天第一件事，先背一遍泰勒展开式</div><a class="blog-slider__button" href="2025/02/22/数二 随笔/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/02/17/计算机组成原理 第一章 计算机系统概述/" alt=""><img width="48" height="48" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/02/17/67b2da11a9c64.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-26</span><a class="blog-slider__title" href="2025/02/17/计算机组成原理 第一章 计算机系统概述/" alt="">计算机组成原理 第一章 计算机系统概述</a><div class="blog-slider__text">啊啊啊，我喜欢计算机组成原理啊啊啊</div><a class="blog-slider__button" href="2025/02/17/计算机组成原理 第一章 计算机系统概述/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/23/操作系统 第一章 计算机系统概述/" alt=""><img width="48" height="48" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/23/67dffa6e3a768.jpeg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-26</span><a class="blog-slider__title" href="2025/03/23/操作系统 第一章 计算机系统概述/" alt="">操作系统 第一章 计算机系统概述</a><div class="blog-slider__text">我是谁？</div><a class="blog-slider__button" href="2025/03/23/操作系统 第一章 计算机系统概述/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/09/22/《计算机网络 自顶向下方法》笔记：第一章 计算机网络和因特网/" alt=""><img width="48" height="48" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/27/6746e02b1d09c.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-26</span><a class="blog-slider__title" href="2024/09/22/《计算机网络 自顶向下方法》笔记：第一章 计算机网络和因特网/" alt="">《计算机网络 自顶向下方法》笔记：第一章 计算机网络和因特网</a><div class="blog-slider__text">有种高中生物的美。</div><a class="blog-slider__button" href="2024/09/22/《计算机网络 自顶向下方法》笔记：第一章 计算机网络和因特网/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/11/27/博客优化日志/" alt=""><img width="48" height="48" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/30/674ae885d9695.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-26</span><a class="blog-slider__title" href="2024/11/27/博客优化日志/" alt="">博客优化日志</a><div class="blog-slider__text">记录对博客的修改，目前看起来还是很塑料。</div><a class="blog-slider__button" href="2024/11/27/博客优化日志/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/11/26/Hexo博客搭建教程/" alt=""><img width="48" height="48" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/30/674ae88cdbcd7.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-26</span><a class="blog-slider__title" href="2024/11/26/Hexo博客搭建教程/" alt="">Hexo博客搭建教程</a><div class="blog-slider__text">先开个坑！</div><a class="blog-slider__button" href="2024/11/26/Hexo博客搭建教程/" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --></body></html>