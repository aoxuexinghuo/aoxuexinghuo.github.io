<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>计算机组成原理 第五章 中央处理器 | ℡傲雪&amp;星火ぴ</title><meta name="author" content="℡傲雪&amp;星火ぴ"><meta name="copyright" content="℡傲雪&amp;星火ぴ"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="大的药来了。">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机组成原理 第五章 中央处理器">
<meta property="og:url" content="https://aoxuexinghuo.github.io/2025/03/12/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%20%E7%AC%AC%E4%BA%94%E7%AB%A0%20%E4%B8%AD%E5%A4%AE%E5%A4%84%E7%90%86%E5%99%A8/index.html">
<meta property="og:site_name" content="℡傲雪&amp;星火ぴ">
<meta property="og:description" content="大的药来了。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://bu.dusays.com/2025/03/12/67d16c3e6dcfc.jpg">
<meta property="article:published_time" content="2025-03-12T11:10:06.000Z">
<meta property="article:modified_time" content="2026-01-01T02:12:17.925Z">
<meta property="article:author" content="℡傲雪&amp;星火ぴ">
<meta property="article:tag" content="408">
<meta property="article:tag" content="计算机组成原理">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://bu.dusays.com/2025/03/12/67d16c3e6dcfc.jpg"><link rel="shortcut icon" href="/img/pikachu.png"><link rel="canonical" href="https://aoxuexinghuo.github.io/2025/03/12/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%20%E7%AC%AC%E4%BA%94%E7%AB%A0%20%E4%B8%AD%E5%A4%AE%E5%A4%84%E7%90%86%E5%99%A8/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":"ture","top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":150,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '计算机组成原理 第五章 中央处理器',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/progress_bar.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_4778163_aof4rb3tf27.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><div class="loading-img"></div><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (false) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div id="web_bg" style="background-image: url(https://bu.dusays.com/2024/11/27/6746de97857ae.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/28/6747d82900e41.jpg" onerror="onerror=null;src='https://bu.dusays.com/2024/11/28/6748473533994.jpeg'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-pokeball"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw iconfont icon-check"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw iconfont icon-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw iconfont icon-folder"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw iconfont icon-acamulator"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw iconfont icon-paper_plane"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw iconfont icon-comete"></i><span> 个人</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://bu.dusays.com/2025/03/12/67d16c3e6dcfc.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">℡傲雪&amp;星火ぴ</span></a><a class="nav-page-title" href="/"><span class="site-name">℡傲雪&amp;星火ぴ</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><!--span= ' ' + _p('search.title')--></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-pokeball"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw iconfont icon-check"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw iconfont icon-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw iconfont icon-folder"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw iconfont icon-acamulator"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw iconfont icon-paper_plane"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw iconfont icon-comete"></i><span> 个人</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">计算机组成原理 第五章 中央处理器</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-03-12T11:10:06.000Z" title="发表于 2025-03-12 19:10:06">2025-03-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2026-01-01T02:12:17.925Z" title="更新于 2026-01-01 10:12:17">2026-01-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/">计算机组成原理</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">11.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>33分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><blockquote>
<p><strong>🚥计算机组成原理 系列文章导航🚥</strong></p>
<ol class="series-items"><li><a href="/2025/02/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%20%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0/" title="计算机组成原理 第一章 计算机系统概述">计算机组成原理 第一章 计算机系统概述</a></li><li><a href="/2025/02/25/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%20%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E6%95%B0%E6%8D%AE%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E8%BF%90%E7%AE%97/" title="计算机组成原理 第二章 数据的表示和运算">计算机组成原理 第二章 数据的表示和运算</a></li><li><a href="/2025/03/01/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%20%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F/" title="计算机组成原理 第三章 存储系统">计算机组成原理 第三章 存储系统</a></li><li><a href="/2025/03/09/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%20%E7%AC%AC%E5%9B%9B%E7%AB%A0%20%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F/" title="计算机组成原理 第四章 指令系统">计算机组成原理 第四章 指令系统</a></li><li><a href="/2025/03/12/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%20%E7%AC%AC%E4%BA%94%E7%AB%A0%20%E4%B8%AD%E5%A4%AE%E5%A4%84%E7%90%86%E5%99%A8/" title="计算机组成原理 第五章 中央处理器">计算机组成原理 第五章 中央处理器</a></li><li><a href="/2025/03/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%20%E7%AC%AC%E5%85%AD%E7%AB%A0%20%E6%80%BB%E7%BA%BF/" title="计算机组成原理 第六章 总线">计算机组成原理 第六章 总线</a></li><li><a href="/2025/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%20%E7%AC%AC%E4%B8%83%E7%AB%A0%20%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E7%B3%BB%E7%BB%9F/" title="计算机组成原理 第七章 输入/输出系统">计算机组成原理 第七章 输入/输出系统</a></li></ol>
</blockquote>
<h2 id="一、CPU-的功能和基本结构">一、CPU 的功能和基本结构</h2>
<p><strong>CPU 的功能</strong>：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>指令控制</strong>：完成取指令、分析指令和执行指令的操作，即程序的顺序控制。</p>
</li>
<li class="lvl-2">
<p><strong>操作控制</strong>：产生完成一条指令所需的操作信号，把各种操作信号送到相应的部件，从而控制这些部件按指令的要求正确执行。</p>
</li>
<li class="lvl-2">
<p><strong>时间控制</strong>：严格控制各种操作信号的出现时间、持续时间及出现的时间顺序。</p>
</li>
<li class="lvl-2">
<p><strong>数据加工</strong>：对数据进行算术和逻辑运算。</p>
</li>
<li class="lvl-2">
<p><strong>中断处理</strong>：对运行过程中出现的异常情况和终端请求进行处理。</p>
</li>
</ul>
<p><strong>CPU 的基本结构</strong>：包括运算器和控制器两大部分</p>
<p><strong>运算器</strong>：对数据进行加工。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>算术逻辑单元</strong>：主要功能是进行算术/逻辑运算。</p>
</li>
<li class="lvl-2">
<p><strong>通用寄存器组</strong>：如 AX、BX、CX、DX、SP 等，用于存放操作数和各种地址信息等。SP 是堆栈指针，用于指示栈顶的地址。</p>
</li>
<li class="lvl-2">
<p><strong>暂存器</strong>：用于暂存从主存读来的数据，这个数据不能存放在通用寄存器中，否则会破坏其原有内容。</p>
</li>
<li class="lvl-2">
<p><strong>累加寄存器</strong>：它是一个通用寄存器，用于暂时存放 ALU 运算的结果信息，用于实现加法运算。</p>
</li>
<li class="lvl-2">
<p><strong>程序状态字寄存器</strong>：PSW 中这些标志位参与并决定微操作的形成。</p>
</li>
<li class="lvl-2">
<p><strong>移位器</strong>：对运算结果进行移位运算。</p>
</li>
<li class="lvl-2">
<p><strong>计数器</strong>：控制乘除运算的操作步数。</p>
</li>
</ul>
<blockquote>
<p><strong>注意</strong>：通用寄存器的位数取决于机器字长。</p>
</blockquote>
<p><strong>控制器</strong>：协调并控制计算机各部件执行程序的指令序列，基本功能包括取指令、分析指令、执行指令。 每条指令的执行是由控制器发出的一组微操作实现的。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>程序计数器</strong>：用于指出下一条指令在主存中的存放地址。CPU 根据 PC 的内容去主存中取指令。因为程序指令中指令通常是顺序执行的，所以 PC 有自增功能</p>
</li>
<li class="lvl-2">
<p><strong>指令寄存器</strong>：用于保存当前正在执行的那条指令。</p>
</li>
<li class="lvl-2">
<p><strong>指令译码器</strong>：仅对操作字段进行译码，向控制器提供特定的操作信号。</p>
</li>
<li class="lvl-2">
<p><strong>微操作信号发生器</strong>：根据 IR 的内容（指令）、PSW 的内容（状态信息）及时序信号，产生控制整个计算机系统所需的各种控制信号，其结构有组合逻辑型和存储逻辑型两种。</p>
</li>
<li class="lvl-2">
<p><strong>时序系统</strong>：用于产生各种时序信号，它们都是由统一时钟（CLOCK）分频得到。</p>
</li>
<li class="lvl-2">
<p><strong>存储器地址寄存器</strong>：用与存放所要访问的主存单元的地址。</p>
</li>
<li class="lvl-2">
<p><strong>存储器数据寄存器</strong>：用于存放向主存写入的信息或从主存中读出的信息。</p>
</li>
</ul>
<blockquote>
<p><strong>注意</strong>：可以用字节地址表示指令地址，此时 PC 的位数与存储器的位数相等，而存储器地址的位数取决于存储器的容量；也可以用字地址表示指令地址，这种情况下指令必须采用按边界对齐的方式存放，此时 PC 的位数 = 存储器地址的位数 - log2(指令字长的字节数)。</p>
</blockquote>
<p>下图为 <strong>CPU 内部单总线方式</strong>下的结构，其中，橙色标注的为<strong>用户可见的寄存器</strong>，灰色标注的为<strong>用户不可见的寄存器</strong>。</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/15/67d574d372858.png" alt="image-20250314143944129" style="zoom: 50%;" />
<h2 id="二、指令执行过程">二、指令执行过程</h2>
<h3 id="1-指令周期">1.指令周期</h3>
<p><strong>指令周期</strong>：CPU 从主存中每取出并执行一条指令所需的全部时间。取值阶段完成取指令和分析指令的操作，也称<strong>取指周期</strong>；执行阶段完成执行指令的操作，也称<strong>执行周期</strong>。</p>
<p><strong>指令周期</strong>常常用若干<strong>机器周期</strong>来表示，机器周期又叫 <strong>CPU 周期</strong>。</p>
<p>一个<strong>机器周期</strong>又包括若干<strong>时钟周期</strong>（也称为节拍、T 周期或 CPU 时钟周期，是 CPU 操作的<strong>最基本单位</strong>）。</p>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/15/67d574d8da289.png" alt="image-20250314150836418"></p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/15/67d574de89a99.png" alt="image-20250314200226346" style="zoom: 80%;" />
<p>每个指令周期内机器周期数可以不等，每个机器周期内的节拍数也可以不等。</p>
<p>四个工作周期都有 CPU 访存操作，只是访存的目的不同。取指周期是为了取指令，间址周期是为了取有效地址，执行周期是为了取操作数（当指令为访存指令时），中断周期是为了保存程序断点。</p>
<blockquote>
<p><strong>注意</strong>：早期计算机通常采用机器周期、节拍和脉冲三级时序系统，一个指令可分为取指令、取操作数、执行、中断响应等工作周期，称为机器周期。现在的计算机已不再采用上述三级时序系统，机器周期的概念已逐渐消失，CPU 内部的定时信号就是时钟，一个时钟周期就是一个节拍。</p>
</blockquote>
<h3 id="2-指令周期的数据流">2.指令周期的数据流</h3>
<p>为了区分 CPU 的四个周期，在 CPU 内部可设置 4 个标志触发器（一般集成在 CU 内部），如下图：</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/15/67d57d7d78b02.png" alt="image-20250315211535512" style="zoom: 67%;" />
<p>图中的 <strong>FE（Fetch Execution）、IND（Indirect Addressing）、EX（Execute）、INT（Interrupt）</strong> 分别对应取指、间址、执行、中断四个周期，并用 1 表示有效。</p>
<h4 id="（1）取指周期">（1）取指周期</h4>
<p>取指周期的任务是根据 PC 的内容从主存储器中取出指令代码并存放在 IR 中：</p>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/15/67d574e28e015.png" alt="image-20250315153549832"></p>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/15/67d574e5350dd.png" alt="image-20250315153535261"></p>
<blockquote>
<p><strong>注意</strong>：不同长度的指令，取指操作可能是不同的。在指令长度相同的情况下，所有指令的取值操作是相同的。</p>
</blockquote>
<h4 id="（2）间址周期">（2）间址周期</h4>
<p>间址周期的任务是取操作数的有效地址，需要先判断有没有间址周期，下面以一次间址为例：</p>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/15/67d574ea1a98c.png" alt="image-20250315152557064"></p>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/15/67d574edb821a.png" alt="image-20250315152225460"></p>
<p>间址周期的第一步中，IR 和 MDR 两者的内容是一样的，都可以提供指令字的地址字段。</p>
<p>间址周期的最后，将有效地址存放到 MDR 中，但也有的 CPU 会再将有效地址送到指令的地址码字段，记作：(MDR)-&gt;Ad(IR)。</p>
<h4 id="（3）执行周期">（3）执行周期</h4>
<p>执行周期的任务是取操作数，并根据 IR 中的指令字的操作码通过 ALU 操作产生执行结构。但不同指令的执行周期操作不同，没有统一数据流向。</p>
<h4 id="（4）中断周期">（4）中断周期</h4>
<p>中断周期的任务是处理中断请求，假设程序断点存入堆栈中，并用 SP 指示栈顶地址，而且进栈操作是先修改栈顶指针，后存入数据：</p>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/15/67d574f2b32e5.png" alt="image-20250315152625121"></p>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/15/67d574f741b91.png" alt="image-20250315152327605"></p>
<h3 id="3-指令执行方案">3.指令执行方案</h3>
<h4 id="（1）单周期处理器">（1）单周期处理器</h4>
<p><strong>单周期处理器</strong>对所有指令都选用相同的执行时间来完成。每条指令都在一个时钟周期内完成（CPI = 1），指令之间串行执行；指令周期取决于执行时间最长的指令的执行时间。</p>
<p>对于那些本来可以在更短时间内完成的指令，仍要在这个较长的周期内完成，会降低整个系统的运行速度。</p>
<h4 id="（2）多周期处理器">（2）多周期处理器</h4>
<p><strong>多周期处理器</strong>对不同类型的指令选用不同的执行步骤，指令需要几个周期就为其分配几个周期，因此可选用不同个数的时钟周期来完成不同指令的执行过程（CPI &gt; 1），不再要求所有指令占用相同的执行时间。多指令周期方案中指令之间仍是<strong>串行</strong>执行的。</p>
<blockquote>
<p><strong>注意</strong>：多周期 CPU 至少需要 2 个时钟周期才能执行一条指令，CPI &gt; 1。</p>
</blockquote>
<blockquote>
<p><strong>注意</strong>：在一条指令的执行过程中，单周期 CPU 的每个控制信号<strong>保持不变</strong>，每个部件只能使用<strong>一次</strong>；多周期 CPU 的控制信号<strong>可能发生改变</strong>，同一部件可使用<strong>多次</strong>。</p>
</blockquote>
<h4 id="（3）流水线处理器">（3）流水线处理器</h4>
<p><strong>流水线处理器</strong>采用指令直接并行执行的方案，力争在每个时钟周期完成一条指令的执行过程（只能在理想情况下才能达到，此时 CPI = 1）。这种方案通过在每个时钟周期内启动一条指令，尽量让多条指令同时运行，但各自出在不同的执行步骤中（因为指令在不同步骤中要用到的硬件会有所不同）。</p>
<h2 id="三、数据通路的功能和基本结构">三、数据通路的功能和基本结构</h2>
<h3 id="1-数据通路的功能和组成">1.数据通路的功能和组成</h3>
<p>CPU 可以视为由<strong>数据通路</strong>和<strong>控制部件</strong>两大部分组成。数据在指令执行过程中所经过的路径，包括路径上的部件，称为<strong>数据通路</strong>。数据通路由控制部件控制，控制部件根据每条指令功能的不同，生成对数据通路的控制信号。</p>
<p>组成数据通路的原件主要分为<strong>组合逻辑元件</strong>和<strong>时序逻辑元件</strong>两类：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>组合逻辑元件</strong>（操作元件）：任何适合产生的输出仅取决于当前的输入。不含存储信号的记忆单元，也不受时钟信号的控制，输入输出之间无反馈通路，数据是单向传输的。常用的有加法器、算术逻辑单元（ALU）、译码器、多路选择器、三态门等。</p>
</li>
<li class="lvl-2">
<p><strong>时序逻辑元件</strong>（状态元件）：任何时候的输出不仅与该时刻的输入有关，还与该时刻以前的输入有关，因此时序电路必然包含存储信号的记忆单元。此外还必须在时钟节拍下工作。各类寄存器和存储器都属于时序逻辑单元。</p>
</li>
</ul>
<blockquote>
<p><strong>注意</strong>：ALU、通用寄存器、状态寄存器、Cache、MMU（内存管理单元）、浮点运算逻辑、异常和中断处理逻辑等，都是指令执行过程中数据流经的部件，都属于数据通路的一部分。</p>
</blockquote>
<h3 id="2-数据通路的基本结构">2.数据通路的基本结构</h3>
<h4 id="（1）CPU-内部单总线方式">（1）CPU 内部单总线方式</h4>
<p>将 ALU 及所有寄存器都连接到一条内部总线上，称为单总线结构的数据通路。这种结构比较简单，但数据传输存在较多的冲突现象，性能较低。</p>
<p>区分内部总线与系统总线:</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>内部总线</strong>：是指同一部件（如 CPU 内部连接各寄存器及运算部件）之间的总线。</p>
</li>
<li class="lvl-2">
<p><strong>系统总线</strong>：是指同一台计算机系统的各部件（如 CPU、内存、通道和各类 I/O 接口）间互相连接的总线。</p>
</li>
</ul>
<blockquote>
<p><strong>注意</strong>：单周期处理器（CPI = 1）不能采用单总线方式，因为单总线将所有寄存器都连接到一条公共总线上，一个时钟周期内只允许一次操作，无法完成一条指令的全部操作。</p>
</blockquote>
<h4 id="（2）CPU-内部多总线方式">（2）CPU 内部多总线方式</h4>
<p>CPU 内部有两条或更多的总线时，构成双总线结构或多总线结构。采用多总线结构可以同时在多个总线上传送不同的数据，提升效率。</p>
<h4 id="（3）专用数据通路方式">（3）专用数据通路方式</h4>
<p>根据指令执行过程中的数据和地址的流动方向安排连接线路（只要两个寄存器之间需要有数据流动，就专门建立一个连线）。性能高，基本不存在数据冲突，但结构复杂、硬件量大，不易实现。</p>
<p>此外，如果直接用导线连接，会导致多个寄存器同时并且一直传输数据。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>解决方式 1：使用多路选择器根据控制信号选择一路输出。</p>
</li>
<li class="lvl-2">
<p>解决方法 2：使用三态门控制每一路是否输出。</p>
</li>
</ul>
<h3 id="3-数据通路的操作举例">3.数据通路的操作举例</h3>
<p>总线是一组共享的传输信号线，它不能存储信息，在任一时刻也<strong>只能有一个部件</strong>把信息送到总线上（但可以有一个或多个部件接收信息）。下面以单总线数据通路为例介绍常见操作的流程及控制信号：</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/15/67d574fe4a4de.png" alt="image-20250315195047037" style="zoom: 67%;" />
<blockquote>
<p><strong>单总线结构下 ALU 中设置暂存器的原因</strong>：</p>
<p>单总线数据通路中，每一时刻总线上只有一个数据有效。因为 ALU 是一个没有存储功能的组合逻辑元件，在其执行运算时必须保持两个输入端同时有效，所以先将一个操作数经内部总线送入暂存器 Y 保存。Y 的内容在 ALU 的左输入端始终有效，再将另一个操作数经内部总线直接送到 ALU 的右端。ALU 输出端也不能直接与总线相连，否则其输出会通过总线反馈到输入端，影响运算结果，因此将运算结果暂存在寄存器 Z 中。</p>
</blockquote>
<p><strong>（1）通用寄存器之间传送数据</strong></p>
<p>以 PC 为例，将 PC 的内容送至 MAR：</p>
<table>
<thead>
<tr>
<th style="text-align:center">微操作</th>
<th style="text-align:center">控制信号</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">(PC) -&gt; MAR</td>
<td style="text-align:center">PCout 和 MARin 有效，PC 内容 -&gt; MAR</td>
</tr>
</tbody>
</table>
<p><strong>（2）从主存读取数据</strong></p>
<p>以 CPU 从主存中取指令为例：</p>
<table>
<thead>
<tr>
<th style="text-align:center">微操作</th>
<th style="text-align:center">控制信号</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">(PC) -&gt; MAR</td>
<td style="text-align:center">PCout 和 MARin 有效，现行指令地址 -&gt; MAR</td>
</tr>
<tr>
<td style="text-align:center">MEM(MAR) -&gt;MDR, (PC) + 1 -&gt; PC</td>
<td style="text-align:center">MDRinE 有效，CU 发出读命令，取出指令后 PC + 1</td>
</tr>
<tr>
<td style="text-align:center">(MDR) -&gt; IR</td>
<td style="text-align:center">MDRout 和 IRin 有效，现行指令 -&gt; IR</td>
</tr>
</tbody>
</table>
<p><strong>（3）将数据写入主存</strong></p>
<p>以将寄存器 R1 的内容写入寄存器 R2 所指的主存单元为例：</p>
<table>
<thead>
<tr>
<th style="text-align:center">微操作</th>
<th style="text-align:center">控制信号</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">(R1) -&gt; MDR</td>
<td style="text-align:center">R1out 和 MDRin 有效</td>
</tr>
<tr>
<td style="text-align:center">(R2) -&gt; MAR</td>
<td style="text-align:center">R2out 和 MARin有效</td>
</tr>
<tr>
<td style="text-align:center">MDR -&gt; MEM(MAR)</td>
<td style="text-align:center">MDRoutE 有效，CU 发出写命令</td>
</tr>
</tbody>
</table>
<p><strong>（4）执行算术或逻辑运算</strong></p>
<p>以加法指令 ADD ACC，R 为例：</p>
<table>
<thead>
<tr>
<th style="text-align:center">微操作</th>
<th style="text-align:center">控制信号</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">(R1) -&gt; Y</td>
<td style="text-align:center">R1out 和 Yin 有效，操作数 -&gt; Y</td>
</tr>
<tr>
<td style="text-align:center">(ACC) + (Y) -&gt; Z</td>
<td style="text-align:center">ACCout 和 ALUin 有效，CU 向 ALU 发出加命令，结果 -&gt; Z</td>
</tr>
<tr>
<td style="text-align:center">(Z) -&gt; ACC</td>
<td style="text-align:center">Zout 和 ACCin 有效，结果 -&gt; ACC</td>
</tr>
</tbody>
</table>
<p>以上三步不能同时执行，否则会引起总线冲突，因此该操作需要三个时钟周期。</p>
<p><strong>（5）修改程序计数器的值</strong></p>
<p>以 JMP addr（addr 为目标转移地址）实现将 IR 中的地址字段写入 PC，完成该操作的流程及控制信号为例：</p>
<table>
<thead>
<tr>
<th style="text-align:center">微操作</th>
<th style="text-align:center">控制信号</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Ad(IR) -&gt; PC</td>
<td style="text-align:center">IRout 和 PCin 有效</td>
</tr>
</tbody>
</table>
<h2 id="四、控制器的功能和工作原理">四、控制器的功能和工作原理</h2>
<p>根据控制器产生微操作控制信号的方式的不同，控制器可分为<strong>硬布线控制器</strong>和<strong>微程序控制器</strong>。</p>
<h3 id="1-硬布线控制器">1.硬布线控制器</h3>
<p><strong>硬布线控制器</strong>：由复杂的组合逻辑门电路和触发器构成，也称<strong>组合逻辑控制器</strong>。</p>
<p>根据指令操作码、目前的机器周期、节拍信号、机器状态条件，即可确定现在这个节拍下应该发出哪些微命令。</p>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/17/67d7ba9772d4b.png" alt="image-20250316152012621"></p>
<p>设计步骤：</p>
<ol>
<li class="lvl-3">
<p>分析每个阶段的微操作序列（取指、间址、执行、中断四个阶段）。</p>
</li>
<li class="lvl-3">
<p>选择 CPU 的控制方式（采用定长机器周期还是不定长机器周期，每个机器周期安排几个节拍）。</p>
</li>
<li class="lvl-3">
<p>安排微操作时序（如何在有限的节拍内完成整个机器周期内的所有微操作）。</p>
</li>
<li class="lvl-3">
<p>电路设计（确定每个微操作命令的逻辑表达式并用电路实现）。</p>
</li>
</ol>
<p>安排微操作时序的原则：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>原则一：微操作的先和顺序不得随意更改。</p>
</li>
<li class="lvl-2">
<p>原则二：被控对象不同的微操作尽量安排在一个节拍内完成。</p>
</li>
<li class="lvl-2">
<p>原则三：占用时间较短的微操作尽量安排在一个节拍内完成，并允许有先后顺序。</p>
</li>
</ul>
<blockquote>
<p><strong>注意</strong>：从主存取数据，用时较长，因此必须一个时钟周期才能保证微操作的完成；CPU 内部寄存器之间的数据传送，速度很快，因此在一个时钟周期内可以紧接着完成。</p>
</blockquote>
<p><strong>硬布线控制器的特点</strong>：指令越多，设计和实现就越复杂，因此一般用于 RISC，如果扩充一条新的指令，则控制器的设计就需要大改，因此扩充指令较困难。由于使用纯硬件实现控制，因此执行速度很快。微操作控制信号由组合逻辑电路即时产生。</p>
<h3 id="2-微程序控制器">2.微程序控制器</h3>
<h4 id="（1）微程序控制的基本概念">（1）微程序控制的基本概念</h4>
<p><strong>微程序控制器</strong>：采用存储逻辑实现，将微操作信号代码化，使每条机器指令转化成为一段微程序并存入一个专门的存储器（控制存储器）中，微操作控制信号由微指令产生。</p>
<p>微程序控制器的设计采用<strong>存储程序</strong>的思想，CPU 出厂前将所有指令的微程序存入<strong>控制器存储器</strong>中。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>程序</strong>：由指令序列组成。</p>
</li>
<li class="lvl-2">
<p><strong>微程序</strong>：由微指令序列组成，每一种指令对应一个微程序。</p>
</li>
<li class="lvl-2">
<p><strong>指令</strong>：对程序执行步骤的描述。</p>
</li>
<li class="lvl-2">
<p><strong>微指令</strong>：对指令执行步骤的描述。</p>
</li>
<li class="lvl-2">
<p><strong>微命令</strong>：在微程序控制的计算机中，控制部件向执行部件发出的各种控制命令称为微命令，是构成控制序列的<strong>最小单元</strong>。</p>
</li>
<li class="lvl-2">
<p><strong>微操作</strong>：执行部件收到微命令后所进行的操作称为微操作。</p>
</li>
</ul>
<p>微程序和指令是一一对应的，微命令和微操作是一一对应的。</p>
<blockquote>
<p><strong>注意</strong>：硬布线控制器中也有微命令与微操作的概念，并非微程序控制器的专有概念。</p>
</blockquote>
<h4 id="（2）微程序控制器的组成与结构">（2）微程序控制器的组成与结构</h4>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/17/67d8073bd9281.png" alt="image-20250317140031212"></p>
<p><strong>微周期</strong>：从控制存储器中取出并执行一条微指令所需的全部时间，通常为一个时钟周期。</p>
<p>微指令是若干微命令的集合，一条微指令通常包含两大部分信息：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>操作控制字段</strong>：也称微操作码字段，用于产生某一步操作所需的各种操作控制信号。</p>
</li>
<li class="lvl-2">
<p><strong>顺序控制字段</strong>：也称微地址码字段，用于控制产生下一条要执行的微指令地址。</p>
</li>
</ul>
<p><strong>寄存器的区分</strong>：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>地址寄存器（MAR）</strong>：存放主存的读/写地址。</p>
</li>
<li class="lvl-2">
<p><strong>微指令地址寄存器（uPC 或 CMAR）</strong>：存放待执行的微指令在控制存储器中的微地址。</p>
</li>
<li class="lvl-2">
<p><strong>指令寄存器（IR）</strong>：存放从主存中读出的指令。</p>
</li>
<li class="lvl-2">
<p><strong>微指令寄存器（uIR 或 CMDR）</strong>：存放从控制存储器中读出的微指令。</p>
</li>
</ul>
<h4 id="（3）微程序控制器的工作原理">（3）微程序控制器的工作原理</h4>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/17/67d807413a26e.png" alt="image-20250317141126644"></p>
<p>取指周期的微指令序列固定从 #0 开始存放，执行周期的微指令序列的存放根据指令操作码确定。</p>
<p>每执行完一条微指令，会根据微指令上的微地址码字段去执行下一条微指令。但还会结合指令地址码的寻址特征判断是否跳过间址周期、结合中断信号判断是否进入中断周期。</p>
<blockquote>
<p><strong>注意 1</strong>：所有指令的取指周期、间址周期、中断周期所对应的微指令序列通常是公用的，执行周期的微指令序列各不相同。故如果某指令系统中有 n 条机器指令，则 CM 中微程序（段）的个数至少是 n + 1 个。</p>
</blockquote>
<blockquote>
<p><strong>注意 2</strong>：物理上，取指周期、执行周期看起来像是两个微程序，但逻辑上应该把它们看作一个整体。因此，一条指令对应一个微程序的说法是正确的（出题老头左右脑互搏魅力时刻）。</p>
</blockquote>
<h3 id="3-微指令的设计">3.微指令的设计</h3>
<p>微命令与微操作一一对应，一个微命令对应一根输出线。有的微命令可以并行执行，因此一条微指令可以包含多个微命令。</p>
<p>微命令有<strong>相容性</strong>和<strong>互斥性</strong>之分，相容性微命令是指可以同时出现、共同完成某一些微操作的命令，互斥性微命令是指在机器中不允许同时出现的微命令。</p>
<h4 id="（1）微指令的格式">（1）微指令的格式</h4>
<p><strong>水平型微指令</strong>：一条微指令能够定义多个可并行的微程序。</p>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/17/67d807465e36f.png" alt="image-20250317150140164"></p>
<p>优点：微程序短，执行速度快。</p>
<p>缺点：微指令长，编写微程序比较麻烦。</p>
<p><strong>垂直型微指令</strong>：一条微指令只能定义一个微命令，由微操作码字段规定具体功能。</p>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/17/67d80749e35e3.png" alt="image-20250317150337946"></p>
<p>优点：微指令短、简单、规整，便于编写微程序。</p>
<p>缺点：微程序长，执行速度慢，工作效率低。</p>
<p><strong>混合型微指令</strong>：在垂直型的基础上增加一些不太复杂的并行操作。微指令较短，仍便于编写；微程序也不长，执行速度加快。</p>
<h4 id="（2）微指令的编码方式">（2）微指令的编码方式</h4>
<p>从编码方式看，直接编码、字段直接编码和字段间接编码都属于水平型微指令。</p>
<p><strong>直接编码（直接控制）方式</strong></p>
<p>在微指令的操作控制字段中，每一位代表一个微操作命令，某位为 1，表示该控制信号有效。</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/17/67d8074ddac68.png" alt="image-20250317151741111" style="zoom:80%;" />
<p>优点：简单、直观，执行速度快，操作并行性好。</p>
<p>缺点：微指令字长过长，n 个微命令就要求微指令的操作字段有 n 位，造成控存容量极大。</p>
<p><strong>字段直接编码方式</strong></p>
<p>将微指令的控制字段分成若干段，每段经译码后发出控制信号。</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/17/67d80751b5ac7.png" alt="image-20250317152427897" style="zoom:80%;" />
<p>微命令字段分段的原则：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>互斥性微命令分在同一段内，相容性微命令分在不同段内。</p>
</li>
<li class="lvl-2">
<p>每个小段中包含的信息位不能太多，否则将增加译码线路的复杂性和译码时间。</p>
</li>
<li class="lvl-2">
<p>一般每个小段还要留出一个状态，表示本字段不发出任何微命令。因此，当某字段的长度为 3 位时，最多只能表示 7 个互斥的微命令，通常用全 0 表示不操作。</p>
</li>
</ul>
<p>优点：可以缩短微指令字长。</p>
<p>缺点：要通过译码电路后再发出微命令，因此比直接编码方式慢。</p>
<p><strong>字段间接编码方式</strong></p>
<p>一个字段的某些微命令需由另一个字段中的某些微命令来解释（经过两次译码），由于不是靠字段直接译码发出的微命令，故称为字段间接编码，又称隐式编码。</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/17/67d807582e2f1.png" alt="image-20250317153149193" style="zoom: 80%;" />
<p>优点：可以进一步缩短微指令字长。</p>
<p>缺点：削弱了微指令的并行控制能力，故通常作为字段直接编码方式的一种辅助手段。</p>
<h4 id="（3）微指令的地址形成方式">（3）微指令的地址形成方式</h4>
<ol>
<li class="lvl-3">
<p>由微指令的后继地址字段（也称下地址字段）指出。在微指令格式中设置一个后继地址字段，由微指令的后继地址字段直接指出后继微指令的地址，这种方式也称<strong>断定方式</strong>。</p>
</li>
<li class="lvl-3">
<p>根据机器指令的操作码形成。当机器指令取自指令寄存器后，微指令的地址由操作码经微地址形成部件形成，该部件输出的是对应机器指令微程序的首地址。</p>
</li>
<li class="lvl-3">
<p>增量计数法。即 (uPC) + 1 -&gt; uPC，适用于后继微指令地址是连续的情况。</p>
</li>
<li class="lvl-3">
<p>根据各种标志决定下一条微指令分支转移的地址。</p>
</li>
<li class="lvl-3">
<p>由硬件直接产生微程序入口地址。电源加电后，第一条微指令的地址可由专门的硬件电路产生，并送至 uPC，这个地址即为取指周期微程序的入口地址。</p>
</li>
</ol>
<h3 id="4-微程序控制单元的设计">4.微程序控制单元的设计</h3>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/17/67d8075c37032.png" alt="image-20250317192727508"></p>
<p>设计步骤：</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/17/67d80ea2f02d4.png" alt="image-20250317193913917" style="zoom:80%;" />
<p>微程序设计分类：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>静态</strong>：微程序无需改变，采用 ROM。</p>
</li>
<li class="lvl-2">
<p><strong>动态</strong>：通过改变微指令和微程序改变机器指令，有利于仿真，采用 EPROM。</p>
</li>
</ul>
<p>毫微程序设计：用毫微程序解释微程序（计算机套娃原理）。</p>
<h3 id="5-两种控制器对比">5.两种控制器对比</h3>
<p><strong>硬布线控制器</strong>：</p>
<p>优点：控制器的速度取决于电路延迟，所以速度快。</p>
<p>缺点：将控制部件视为专门产生固定时序控制信号的逻辑电路，所以把用最少元件和取得最高速度作为设计目标，一旦设计完成，就不可能通过其他额外修改来添加最新功能。</p>
<p><strong>微程序控制器</strong>：</p>
<p>优点：具有规整性、灵活性和可维护性。</p>
<p>缺点：因为微程序控制器采用了存储程序原理，所以每条指令都要从控制存储器中取一次，影响速度。</p>
<table>
<thead>
<tr>
<th style="text-align:center">对比项</th>
<th style="text-align:center">硬布线控制器</th>
<th style="text-align:center">微程序控制器</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>工作原理</strong></td>
<td style="text-align:center">微操作控制信号由组合逻辑电路根据当前的指令码、状态和时序及时产生</td>
<td style="text-align:center">微操作控制信号以微程序的形式存放在控制存储器中，执行指令时读出即可</td>
</tr>
<tr>
<td style="text-align:center"><strong>执行速度</strong></td>
<td style="text-align:center">快</td>
<td style="text-align:center">慢</td>
</tr>
<tr>
<td style="text-align:center"><strong>规整性</strong></td>
<td style="text-align:center">繁琐、不规整</td>
<td style="text-align:center">较规整</td>
</tr>
<tr>
<td style="text-align:center"><strong>应用场合</strong></td>
<td style="text-align:center">RISC CPU</td>
<td style="text-align:center">CISC CPU</td>
</tr>
<tr>
<td style="text-align:center"><strong>易扩充性</strong></td>
<td style="text-align:center">扩充修改困难</td>
<td style="text-align:center">易扩充修改</td>
</tr>
</tbody>
</table>
<h2 id="五、指令流水线">五、指令流水线</h2>
<p>感觉这块很深，还是需要去啃《袁》书。</p>
<h3 id="1-基本概念">1.基本概念</h3>
<p>假设取指、分析、执行 3 个阶段的时间都相等：</p>
<p><strong>（1）顺序执行方式</strong>：总耗时 T = n × 3t = 3nt</p>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/18/67d963452fb3a.png" alt="image-20250318142851270"></p>
<p>传统冯诺依曼机采用顺序执行方式，又称串行执行方式。</p>
<p>优点：控制简单，硬件代价小。</p>
<p>缺点：执行指令的速度较慢，在任何时刻，处理机中只有一条指令在执行，各功能部件的利用率很低。</p>
<p><strong>（2）一次重叠执行方式</strong>：总耗时 T = 3t + (n - 1) × 2t = (1 + 2n)t</p>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/18/67d96349a2f32.png" alt="image-20250318143054920"></p>
<p>优点：程序的执行时间缩短了 1/3，各功能部件的利用率明显提高。</p>
<p>缺点：需要付出硬件上较大开销的代价，控制过程也比顺序执行复杂了。</p>
<p><strong>（3）二次重叠执行方式</strong>：总耗时 T = 3t + (n - 1) × t = (2 + n)t</p>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/18/67d9634de5c1e.png" alt="image-20250318143029018"></p>
<p>与顺序执行方式相比，指令的执行时间缩短近 2/3。这是一种理想的指令执行方式，在正常情况下，处理机中同时有 3 条指令在执行。</p>
<p><strong>指令执行过程图</strong>：主要用于分析指令执行过程以及影响流水线的因素。</p>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/18/67d9635248796.png" alt="image-20250318143850879"></p>
<p><strong>时空图</strong>： 用于分析流水线的性能。</p>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/18/67d9635ccf0a7.png" alt="image-20250318144257879"></p>
<h3 id="2-性能指标">2.性能指标</h3>
<p><strong>（1）吞吐率</strong>：在单位时间内流水线所完成的任务数量，或是输出结果的数量。</p>
<p>理想情况下，流水线的时空图：</p>
<p><img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/18/67d963613bee9.png" alt="image-20250318145133875"></p>
<p>设任务数为 n：处理完成 n 个任务所用的时间为 T_k，则计算流水线吞吐率（TP）的最基本的公式为 TP = n/T_k。</p>
<mjx-container class="MathJax" jax="SVG" display="true" style="direction: ltr; display: block; text-align: center; margin: 1em 0; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="19.02ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 8406.8 1000" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(617,-150) scale(0.707)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z" style="stroke-width: 3;"/></g></g><g data-mml-node="mo" transform="translate(1313.2,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(2369,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(2758,0)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(3501.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(4501.4,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(5323.6,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(6323.8,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(6823.8,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(7212.8,0)"><path data-c="394" d="M51 0Q46 4 46 7Q46 9 215 357T388 709Q391 716 416 716Q439 716 444 709Q447 705 616 357T786 7Q786 4 781 0H51ZM507 344L384 596L137 92L383 91H630Q630 93 507 344Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(8045.8,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z" style="stroke-width: 3;"/></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; overflow: hidden; width: 100%;"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>T</mi><mi>k</mi></msub><mo>=</mo><mo stretchy="false">(</mo><mi>k</mi><mo>+</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">Δ</mi><mi>t</mi></math></mjx-assistive-mml></mjx-container><mjx-container class="MathJax" jax="SVG" display="true" style="direction: ltr; display: block; text-align: center; margin: 1em 0; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -2.172ex;" xmlns="http://www.w3.org/2000/svg" width="45.852ex" height="4.701ex" role="img" focusable="false" viewBox="0 -1118 20266.4 2078" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">流</text></g><g data-mml-node="mi" transform="translate(1000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">水</text></g><g data-mml-node="mi" transform="translate(2000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">线</text></g><g data-mml-node="mi" transform="translate(3000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">的</text></g><g data-mml-node="mi" transform="translate(4000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">实</text></g><g data-mml-node="mi" transform="translate(5000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">际</text></g><g data-mml-node="mi" transform="translate(6000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">吞</text></g><g data-mml-node="mi" transform="translate(7000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">吐</text></g><g data-mml-node="mi" transform="translate(8000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">率</text></g><g data-mml-node="mi" transform="translate(9000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">为</text></g><g data-mml-node="mi" transform="translate(10000,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">：</text></g><g data-mml-node="mi" transform="translate(11000,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(11704,0)"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(12732.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width: 3;"/></g><g data-mml-node="mfrac" transform="translate(13788.6,0)"><g data-mml-node="mi" transform="translate(2938.9,676)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z" style="stroke-width: 3;"/></g><g data-mml-node="mrow" transform="translate(220,-710)"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(1132.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(2132.4,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(2954.7,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(3954.9,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(4454.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(4843.9,0)"><path data-c="394" d="M51 0Q46 4 46 7Q46 9 215 357T388 709Q391 716 416 716Q439 716 444 709Q447 705 616 357T786 7Q786 4 781 0H51ZM507 344L384 596L137 92L383 91H630Q630 93 507 344Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(5676.9,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z" style="stroke-width: 3;"/></g></g><rect width="6237.9" height="60" x="120" y="220"/></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; overflow: hidden; width: 100%;"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi mathvariant="normal">流</mi><mi mathvariant="normal">水</mi><mi mathvariant="normal">线</mi><mi mathvariant="normal">的</mi><mi mathvariant="normal">实</mi><mi mathvariant="normal">际</mi><mi mathvariant="normal">吞</mi><mi mathvariant="normal">吐</mi><mi mathvariant="normal">率</mi><mi mathvariant="normal">为</mi><mi>：</mi><mi>T</mi><mi>P</mi><mo>=</mo><mfrac><mi>n</mi><mrow><mo stretchy="false">(</mo><mi>k</mi><mo>+</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">Δ</mi><mi>t</mi></mrow></mfrac></math></mjx-assistive-mml></mjx-container><p>当 n 趋向于无穷大时，最大吞吐率为 TP_max = 1/△t。</p>
<p><strong>（2）加速比</strong>：完成同样一批任务，不使用流水线所用的时间与使用流水线所用的时间之比。</p>
<p>单独完成一个任务耗时为 k△t，则顺序完成 n 个任务耗时 T0 = nk△t</p>
<mjx-container class="MathJax" jax="SVG" display="true" style="direction: ltr; display: block; text-align: center; margin: 1em 0; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -1.909ex;" xmlns="http://www.w3.org/2000/svg" width="36.863ex" height="5.009ex" role="img" focusable="false" viewBox="0 -1370 16293.4 2213.8" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">实</text></g><g data-mml-node="mi" transform="translate(1000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">际</text></g><g data-mml-node="mi" transform="translate(2000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">加</text></g><g data-mml-node="mi" transform="translate(3000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">速</text></g><g data-mml-node="mi" transform="translate(4000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">比</text></g><g data-mml-node="mi" transform="translate(5000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">为</text></g><g data-mml-node="mi" transform="translate(6000,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">：</text></g><g data-mml-node="mi" transform="translate(7000,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(7922.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width: 3;"/></g><g data-mml-node="mfrac" transform="translate(8978.6,0)"><g data-mml-node="msub" transform="translate(227.4,676)"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(617,-150) scale(0.707)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" style="stroke-width: 3;"/></g></g><g data-mml-node="msub" transform="translate(220,-686)"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(617,-150) scale(0.707)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z" style="stroke-width: 3;"/></g></g><rect width="1235.4" height="60" x="120" y="220"/></g><g data-mml-node="mo" transform="translate(10731.7,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width: 3;"/></g><g data-mml-node="mfrac" transform="translate(11787.5,0)"><g data-mml-node="mrow" transform="translate(1692.4,676)"><g data-mml-node="mi"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(521,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z" style="stroke-width: 3;"/></g></g><g data-mml-node="mrow" transform="translate(220,-686)"><g data-mml-node="mi"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(743.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(1743.4,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(2565.7,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(3565.9,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"/></g></g><rect width="4265.9" height="60" x="120" y="220"/></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; overflow: hidden; width: 100%;"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi mathvariant="normal">实</mi><mi mathvariant="normal">际</mi><mi mathvariant="normal">加</mi><mi mathvariant="normal">速</mi><mi mathvariant="normal">比</mi><mi mathvariant="normal">为</mi><mi>：</mi><mi>S</mi><mo>=</mo><mfrac><msub><mi>T</mi><mn>0</mn></msub><msub><mi>T</mi><mi>k</mi></msub></mfrac><mo>=</mo><mfrac><mrow><mi>k</mi><mi>n</mi></mrow><mrow><mi>k</mi><mo>+</mo><mi>n</mi><mo>−</mo><mn>1</mn></mrow></mfrac></math></mjx-assistive-mml></mjx-container><p>当 n 趋向于无穷大时，最大加速比为 S_max = k。</p>
<p><strong>（3）效率</strong>：流水线的设备利用率</p>
<p>在时空图上，流水线的效率定义为完成 n 个任务占用的时空区有效面积与 n 个任务所用的时间与 k 个流水段所围成的时空区总面积之比。</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/18/67d96364cc444.png" alt="image-20250318151738755" style="zoom:80%;" />
<p>将右部分阶梯状部分拼凑到左边，得</p>
<mjx-container class="MathJax" jax="SVG" display="true" style="direction: ltr; display: block; text-align: center; margin: 1em 0; position: relative;"><svg style="overflow: visible; min-height: 1px; min-width: 1px; vertical-align: -1.909ex;" xmlns="http://www.w3.org/2000/svg" width="36.048ex" height="4.97ex" role="img" focusable="false" viewBox="0 -1353 15933.4 2196.8" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">流</text></g><g data-mml-node="mi" transform="translate(1000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">水</text></g><g data-mml-node="mi" transform="translate(2000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">线</text></g><g data-mml-node="mi" transform="translate(3000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">效</text></g><g data-mml-node="mi" transform="translate(4000,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">率</text></g><g data-mml-node="mi" transform="translate(5000,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">：</text></g><g data-mml-node="mi" transform="translate(6000,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(7041.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width: 3;"/></g><g data-mml-node="mfrac" transform="translate(8097.6,0)"><g data-mml-node="mi" transform="translate(1952.9,676)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z" style="stroke-width: 3;"/></g><g data-mml-node="mrow" transform="translate(220,-686)"><g data-mml-node="mi"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(743.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(1743.4,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z" style="stroke-width: 3;"/></g><g data-mml-node="mo" transform="translate(2565.7,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(3565.9,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width: 3;"/></g></g><rect width="4265.9" height="60" x="120" y="220"/></g><g data-mml-node="mo" transform="translate(12881.2,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width: 3;"/></g><g data-mml-node="mfrac" transform="translate(13937,0)"><g data-mml-node="msub" transform="translate(487.9,676)"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z" style="stroke-width: 3;"/></g><g data-mml-node="mn" transform="translate(617,-150) scale(0.707)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" style="stroke-width: 3;"/></g></g><g data-mml-node="mrow" transform="translate(220,-686)"><g data-mml-node="mi"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z" style="stroke-width: 3;"/></g><g data-mml-node="msub" transform="translate(521,0)"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z" style="stroke-width: 3;"/></g><g data-mml-node="mi" transform="translate(617,-150) scale(0.707)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z" style="stroke-width: 3;"/></g></g></g><rect width="1756.4" height="60" x="120" y="220"/></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block" style="top: 0px; left: 0px; clip: rect(1px, 1px, 1px, 1px); -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; position: absolute; padding: 1px 0px 0px 0px; border: 0px; display: block; overflow: hidden; width: 100%;"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi mathvariant="normal">流</mi><mi mathvariant="normal">水</mi><mi mathvariant="normal">线</mi><mi mathvariant="normal">效</mi><mi mathvariant="normal">率</mi><mi>：</mi><mi>E</mi><mo>=</mo><mfrac><mi>n</mi><mrow><mi>k</mi><mo>+</mo><mi>n</mi><mo>−</mo><mn>1</mn></mrow></mfrac><mo>=</mo><mfrac><msub><mi>T</mi><mn>0</mn></msub><mrow><mi>k</mi><msub><mi>T</mi><mi>k</mi></msub></mrow></mfrac></math></mjx-assistive-mml></mjx-container><p>当 n 趋向于无穷大时，最高效率为 E_max = 1。</p>
<h3 id="3-指令流水线影响因素分类">3.指令流水线影响因素分类</h3>
<h4 id="（1）结构冒险">（1）结构冒险</h4>
<p><strong>结构冒险（资源冲突）</strong>：由于多条指令在同一时刻争用同一资源而形成的冲突称为结构冒险。</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/18/67d9636885da7.png" alt="image-20250318181319352" style="zoom:50%;" />
<p>例如指令和数据都放在同一个存储器中，这么第 i 条指令的 MEM 阶段和第 i + 1 条指令的 IF 阶段同时访问存储器，会造成冲突。另外，如果在访问寄存器时（图中的蓝色块），如果访问的是相同的寄存器，也会造成冲突。</p>
<p><strong>解决办法</strong>：</p>
<ol>
<li class="lvl-3">
<p>后一相关指令暂停一周期。</p>
</li>
<li class="lvl-3">
<p>资源重复配置：数据存储器 + 指令存储器（两者独立存储）</p>
</li>
</ol>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/18/67d9636f3b4e3.png" alt="image-20250318181831063" style="zoom:50%;" />
<blockquote>
<p><strong>袁书原话</strong></p>
<p>解决结构冒险的策略有两个方面：①一个部件每条指令只能使用一次，且只能在特定阶段使用，可以避免一部分结构冒险。②通过设置多个独立的部件来避免硬件资源冲突，例如可将寄存器的读口与写口分来，以及将指令 Cache 和数据 Cache 分离等。</p>
</blockquote>
<h4 id="（2）数据冒险">（2）数据冒险</h4>
<p><strong>数据冒险（数据相关）</strong>：数据相关指在一个程序中，存在必须等前一条指令执行完才能执行后一条指令的情况，则这两条指令即为数据冒险。</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/18/67d963742086b.png" alt="image-20250318160426873" style="zoom:67%;" />
<p>第 2、3、4 条指令中的 r1 与第一条指令中的 r1 存在冲突。需要等待第一条指令中的 r1 完成回写后才能对其使用。</p>
<p>在以非乱序执行的流水线中，所有数据冒险都是因为前面指令写结果之前，后面指令就要读取而造成的，这种数据冒险称为<strong>写后读（Read After Write，RAW）冲突</strong>。</p>
<blockquote>
<p><strong>注意</strong>：在按序执行的流水线中，只可能出现 RAW 冲突。</p>
</blockquote>
<p><strong>解决办法</strong>：</p>
<p><strong>方法一</strong>：把遇到数据相关的指令及其后续指令都暂停一至几个时钟周期，直到数据相关问题消失后再继续执行。可分为<strong>硬件阻塞（stall）</strong> 和<strong>软件插入空操作 “nop”</strong> 两种方法。</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/18/67d9637924573.png" alt="image-20250318184255152" style="zoom:67%;" />
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/18/67d9637f5cbef.png" alt="image-20250318184409770" style="zoom:67%;" />
<p><strong>方法二</strong>：数据旁路（转发）技术。设置相关转发通路，不等前一条指令把计算结构写回寄存器，下一条指令也不再从寄存器读，而将数据通路中生成的中间数据直接转发到 ALU 的输入端，如下图所示。</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/18/67d963856e416.png" alt="image-20250318184710468" style="zoom:67%;" />
<p><strong>方法三</strong>：编译优化。通过编译器调整指令顺序来解决数据相关。</p>
<h4 id="（3）控制冒险">（3）控制冒险</h4>
<p><strong>控制冒险（控制相关）</strong>：当流水线遇到转移指令和其他改变 PC 的值的指令而造成断流时，会引起控制相关。</p>
<p>下图中，12 字节位置的指令跳转到 1000 字节位置的：</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/18/67d9638a875ed.png" alt="image-20250318190725689" style="zoom:80%;" />
<p><strong>解决方法</strong>：</p>
<ol>
<li class="lvl-3">
<p>转移指令分支预测。简单预测（永远猜 ture 或 false）、动态预测（根据历史情况动态调整）。</p>
</li>
<li class="lvl-3">
<p>预取转移成功和不成功两个控制流方向上的目标指令。</p>
</li>
<li class="lvl-3">
<p>加快和提前形成条件码。</p>
</li>
<li class="lvl-3">
<p>提高转移方向的猜准率（在方法一的基础上优化）。</p>
</li>
</ol>
<h3 id="4-流水线的分类">4.流水线的分类</h3>
<p><strong>（1）部件功能级、处理机级和处理机间级流水线</strong></p>
<p>根据流水线使用的级别的不同，流水线可分为如下三种：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>部件功能级流水</strong>：将复杂的算术逻辑运算组成流水线工作方式。例如，可将浮点加法操作分成求阶差、对阶、尾数相加以及结果规格化等 4 个子过程。</p>
</li>
<li class="lvl-2">
<p><strong>处理机级流水线</strong>：把一条指令解释过程分成多个子过程，如前面提到的取指、译码、执行、访存及写回 5 个子过程。</p>
</li>
<li class="lvl-2">
<p><strong>处理机间流水</strong>：是一种宏流水，其中每一个处理机完成某一专门任务，各个处理机所得到的结果需存放在与下一个处理机所共享的存储器中。</p>
</li>
</ul>
<p><strong>（2）单功能流水线和多功能流水线</strong></p>
<p>按流水线可以完成的功能，流水线可分为如下两种：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>单功能流水线</strong>：指只能实现一种固定的专门功能的流水线。</p>
</li>
<li class="lvl-2">
<p><strong>多功能流水线</strong>：指通过各段间的不同连接方式可以同时或不同时地实现多种功能的流水线。</p>
</li>
</ul>
<p><strong>（3）动态流水线和静态流水线</strong></p>
<p>按同一时间内各段之间的连接方式，流水线可分为如下两种：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>静态流水线</strong>：指在同一时间内，流水线的各段只能按同一种功能的连接方式工作。</p>
</li>
<li class="lvl-2">
<p><strong>动态流水线</strong>：指在同一时间内，当某些段正在实现某种运算时，另一些段却正在进行另一种运算。这样对提高流水线的效率很有好处，但会使流水线控制变得很复杂。</p>
</li>
</ul>
<p><strong>（4）线性流水线和非线性流水线</strong></p>
<p>按流水线的各个功能段之间是否有反馈信号，流水线可分为如下两种：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>线性流水线</strong>：从输入到输出，每个功能段只允许经过一次，不存在反馈回路。</p>
</li>
<li class="lvl-2">
<p><strong>非线性流水线</strong>：存在反馈回路，从输入到输出过程中，某些功能段将数次通过流水线，这种流水线适合进行线性递归的运算（例如通过多次加法来实现乘法的流程）。</p>
</li>
</ul>
<h3 id="5-流水线的多发技术">5.流水线的多发技术</h3>
<p><strong>（1）超标量技术（空分复用）</strong></p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/18/67d963902a419.png" alt="image-20250318200146843" style="zoom:67%;" />
<p>每个时钟周期内可并发多条独立指令，要配置多个功能部件。</p>
<p>不能调整指令的执行顺序，通过编译优化技术，把可并行执行的指令搭配起来。</p>
<p><strong>（2）超流水线技术（时分复用）</strong></p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/18/67d96393a7c80.png" alt="image-20250318200627843" style="zoom:67%;" />
<p>将流水线在一个时钟周期内再分段（3 段），在一个时钟周期内，一个功能部件使用多次（3 段），流水线速度是原来的 3 倍。</p>
<p>不能调整指令的执行顺序，靠编译程序解决优化问题。</p>
<blockquote>
<p><strong>注意</strong>：超流水线 CPU 在流水线充满后，每个时钟周期还是执行一条指令，CPI = 1，但其主频更高（时钟周期更短）；超标量技术 CPU 的 CPI 能达到小于 1。因此有时用 CPI 的倒数 ICP（Instructions Per Cycle）来衡量其性能。例如上图中超标量流水线的理想 IPC 为 3。</p>
</blockquote>
<p><strong>（3）超长指令字</strong></p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/18/67d963974d711.png" alt="image-20250318201101354" style="zoom:67%;" />
<p>由编译程序挖掘出指令间潜在的并行性，将多条能并行操作的指令合成一条具有多个操作码字段的超长指令字（可达几百位）。</p>
<p>需要采用多个处理部件 。</p>
<h3 id="6-五段式指令流水线">6.五段式指令流水线</h3>
<p>一条指令的执行过程可以分为如下五个阶段：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>取指（IF）</strong>：从指令存储器或 Cache 中取指令。</p>
</li>
<li class="lvl-2">
<p><strong>译码/读寄存器（ID）</strong>：操作控制器对指令进行译码，同时从寄存器堆中取操作数。</p>
</li>
<li class="lvl-2">
<p><strong>执行/计算地址（EX）</strong>：执行运算操作或计算地址。</p>
</li>
<li class="lvl-2">
<p><strong>访存（MEM）</strong>：对存储器进行读/写操作。</p>
</li>
<li class="lvl-2">
<p><strong>写回（WB）</strong>：将指令执行结结果写回寄存器堆。</p>
</li>
</ul>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/18/67d9639cc9d93.png" alt="image-20250318154835727" style="zoom: 80%;" />
<p>为了方便流水线的设计，将每个阶段的耗时取成一样的，以最长耗时为准，即此处应将机器周期设置为 100 ns。</p>
<p>流水线每个功能段后面都要有一个缓冲寄存器，或称为锁存器（图中蓝框部分）。其作用是保存本流水段的执行结果，提供给下一流水段使用（更方便地统一每一个阶段的实际的时间开销）。</p>
<p>指令 Cache 和数据 Cache 分离，对两个模块的访问是可以并行进行的。Cache 如果未命中，指令流水线会出现断流（<strong>流水线阻塞</strong>）的情况，因为必须去访问主存。</p>
<p>为了实现指令流水线，指令集应具有如下特征：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>指令长度应尽量一致，有利于简化取指令和译码操作。否则，取指令所花的时间长短不一，使得取指部件极其复杂，并且也不利于指令译码。</p>
</li>
<li class="lvl-2">
<p>指令格式应尽量规整，尽量保证源寄存器的位置相同，有利于在指令未知时就可取寄存器操作数，否则须译码后才能确定指令中各寄存器编号的位置。</p>
</li>
<li class="lvl-2">
<p>采用 LOAD/STORE 型指令，其他指令都不能访问存储器，这样可把 LOAD/STORE 指令的地址计算和运算指令的执行步骤规整在同一个周期中，有利于减少操作步骤。</p>
</li>
<li class="lvl-2">
<p>数据和指令在存储器中 “按边界对齐” 存放。这样，有利于减少访存次数，使所需数据在一个流水段内就能从存储器中得到。</p>
</li>
</ul>
<p>常见的五种指令的执行过程：</p>
<p><strong>（1）运算类指令</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>IF</strong>：根据 PC 从指令 Cache 取指令至 IF 段的锁存器</p>
</li>
<li class="lvl-2">
<p><strong>ID</strong>：取出操作数至 ID 段锁存器</p>
</li>
<li class="lvl-2">
<p><strong>EX</strong>：运算，将结果存入 EX 段锁存器</p>
</li>
<li class="lvl-2">
<p><strong>M</strong>：空段</p>
</li>
<li class="lvl-2">
<p><strong>WB</strong>：将运算结果写回指定寄存器</p>
</li>
</ul>
<p><strong>（2）LOAD 指令</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>IF</strong>：根据 PC 从指令 Cache 取指令至 IF 段的锁存器</p>
</li>
<li class="lvl-2">
<p><strong>ID</strong>：将基址寄存器的值放到锁存器 A，将偏移量的值放到 Imm</p>
</li>
<li class="lvl-2">
<p><strong>EX</strong>：运算，得到有效地址</p>
</li>
<li class="lvl-2">
<p><strong>M</strong>：从数据 Cache 中取数并放入锁存器</p>
</li>
<li class="lvl-2">
<p><strong>WB</strong>：将取出的数写回寄存器</p>
</li>
</ul>
<p><strong>（3）STORE 指令</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>IF</strong>：根据 PC 从指令 Cache 取指令至 IF 段的锁存器</p>
</li>
<li class="lvl-2">
<p><strong>ID</strong>：将基址寄存器的值放到寄存器 A，将偏移量的值放到 Imm，将要存的数放到 B</p>
</li>
<li class="lvl-2">
<p><strong>EX</strong>：运算，得到有效地址，并将锁存器 B 的内容放到锁存器 Store</p>
</li>
<li class="lvl-2">
<p><strong>M</strong>：写入数据 Cache</p>
</li>
<li class="lvl-2">
<p><strong>WB</strong>：空段</p>
</li>
</ul>
<p><strong>（4）条件转移指令</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>IF</strong>：根据 PC 从指令 Cache 取指令至 IF 段的锁存器</p>
</li>
<li class="lvl-2">
<p><strong>ID</strong>：进行比较的两个数放入锁存器 A、B，偏移量放入 Imm</p>
</li>
<li class="lvl-2">
<p><strong>EX</strong>：运算，比较两个数</p>
</li>
<li class="lvl-2">
<p><strong>M</strong>：将目标 PC 值写回 PC</p>
</li>
<li class="lvl-2">
<p><strong>WB</strong>：空段</p>
</li>
</ul>
<p><strong>（5）无条件转移指令</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>IF</strong>：根据 PC 从指令 Cache 取指令至 IF 段的锁存器</p>
</li>
<li class="lvl-2">
<p><strong>ID</strong>：偏移量放入 Imm</p>
</li>
<li class="lvl-2">
<p><strong>EX</strong>：将目标 PC 值写回 PC</p>
</li>
<li class="lvl-2">
<p><strong>M</strong>：空段</p>
</li>
<li class="lvl-2">
<p><strong>WB</strong>：空段</p>
</li>
</ul>
<blockquote>
<p><strong>注意</strong>：条件跳转指令对 PC 值的修改在 MEM 阶段执行，不在 WB 阶段，因为 PC 不属于通用寄存器，比较特殊。而无条件跳转指令对 PC 值的修改安排在 EX 阶段执行。尽早地修改 PC 的值是因为越早完成修改，就越能避免控制冲突。</p>
</blockquote>
<h2 id="六、多处理器的基本概念">六、多处理器的基本概念</h2>
<h3 id="1-SISD、SIMD、MIMD-的基本概念">1.SISD、SIMD、MIMD 的基本概念</h3>
<p><strong>（1）单指令流单数据流（SISD）结构</strong></p>
<p><strong>特性</strong>：各指令序列只能并发、不能并行，每条指令处理一两个技术。</p>
<p>不是数据级并行技术。</p>
<p><strong>硬件组成</strong>：一个处理器 + 一个主存储器</p>
<p>若采用指令流水线，需设置多个功能部件，采用多模块交叉存储器。</p>
<p><strong>（2）单指令流多数据流（SIMD）结构</strong></p>
<p><strong>特性</strong>：各指令序列只能并发、不能并行、但每条指令可同时处理很多个具有相同特征的数据。</p>
<p>是一种数据级并行技术。</p>
<p><strong>硬件组成</strong>：一个指令控制部件（CU）+ 多个处理单元/执行单元（如 ALU）+ 多个局部存储器 + 一个主存储器</p>
<p>每个执行单元有各自的寄存器组、局部存储器、地址寄存器，不同执行单元执行同一条指令，处理不同的数据。</p>
<p>SIMD 在使用 for 循环处理数组时最有效；在使用 case 或 switch 语句时效率最低。</p>
<p><strong>（3）多指令流单数据流（MISD）结构</strong></p>
<p>多条指令并行执行，处理同一个数据，现实中不存在这种计算机（乐了）。</p>
<p><strong>（4）多指令流多数据流（MIMD）结构</strong></p>
<p><strong>特性</strong>：各指令序列并行执行，分别处理多个不同的数据。</p>
<p>是一种线程级并行、甚至是线程级以上并行技术（线程级并行指每个核运行各自的线程，多个线程可以并行地执行；线程级以上的并行就是进程级的并行，每个核处理一个进程）。</p>
<p>MIMD 又可以进一步分为<strong>多处理器系统（共享存储多处理器 SMP 的缩写）</strong> 和<strong>多计算机系统</strong></p>
<p><strong>1.多处理器系统</strong></p>
<p><strong>特性</strong>：各处理器之间，可以通过 LOAD/STORE 指令，访问同一个主存储器，可以通过主存相互传递数据，也称<strong>共享存储 MIMD</strong>。</p>
<p><strong>硬件组成</strong>：一台计算机内，包含多个处理器 + 一个主存储器</p>
<p>多个处理器共享单一的物理地址空间。</p>
<p>单一地址空间的多处理器可以分为两个类型：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>统一存储访问（UMA）多处理器</strong>：每个处理器对所有存储单元的访问时间是大致相同的，即访问时间与哪个处理器提出访存请求及访问哪个字无关。</p>
</li>
<li class="lvl-2">
<p><strong>非统一存储访问（NUMA）多处理器</strong>：某些存储器的访存速度要比其他的快，具体取决于哪个处理器提出访问请求及访问哪个字，这是由于主存被分割给了不同处理器。</p>
</li>
</ul>
<blockquote>
<p><strong>多核处理器</strong>：一个 CPU 芯片中包含多个处理器，即多个核（core），因此通常也称为片级多处理器（Chip-Level MultiProcessing，CMP）。意思是一块芯片上集成了多个处理器。所以核都共享一个 LLC（Last-Level Cache，最低一级 Cache），并共享主存储器。本质上和 SMP 是一个东西，只是命名角度不同。</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/19/67da7d190e75e.png" alt="image-20250319161418531" style="zoom:50%;" />
</blockquote>
<p><strong>2.多计算机系统</strong></p>
<p><strong>特性</strong>：各计算机之间，不能通过 LOAD/STORE 指令直接访问对方的存储器，只能通过 “消息传递” 相互传送数据。</p>
<p><strong>硬件组成</strong>：由多台计算机组成，因此拥有多个处理器 + 多个主存储器</p>
<p>每台计算机拥有各自的私有存储器，物理地址空间相互独立。</p>
<p><strong>（5）向量处理机（SIMD 的变体）</strong></p>
<p><strong>特性</strong>：一条指令的处理对象是向量，擅长对向量型数据并行计算、浮点数运算，常被用于超级计算机中，处理科学研究中巨大运算量。</p>
<p><strong>硬件组成</strong>：多个处理单元 + 多组 “向量寄存器”</p>
<p>主存储器应采用 “多个端口同时读取” 的交叉多模块存储器。</p>
<p>主存储器大小限定了机器的解题规模，因此要有大容量的、集中式的主存储器。</p>
<h3 id="2-硬件多线程">2.硬件多线程</h3>
<p>在支持硬件多线程的 CPU 中，必须为每个线程提供单独的通用寄存器组、单独的程序技术器等，线程的切换只需激活选中的寄存器，从而省略了与存储器数据交换的环节，大大减少了线程切换的开销。</p>
<p>硬件多线程有三种方式：</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">细粒度多线程</th>
<th style="text-align:center">粗粒度多线程</th>
<th style="text-align:center">同时多线程（SMT）</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>指令发射</strong></td>
<td style="text-align:center">轮流发射各线程的指令（每个时钟周期发射一个线程）</td>
<td style="text-align:center">连续几个时钟周期，都发射同一线程的指令序列，流水线阻塞时，切换另一个线程</td>
<td style="text-align:center">一个时钟周期内，同时发射多个线程的指令</td>
</tr>
<tr>
<td style="text-align:center"><strong>线程切换频率</strong></td>
<td style="text-align:center">每个时钟周期切换一次线程</td>
<td style="text-align:center">只有流水线阻塞时才切换一次线程</td>
<td style="text-align:center">NULL</td>
</tr>
<tr>
<td style="text-align:center"><strong>线程切换代价</strong></td>
<td style="text-align:center">低</td>
<td style="text-align:center">高，需要重载流水线</td>
<td style="text-align:center">NULL</td>
</tr>
<tr>
<td style="text-align:center"><strong>并行性</strong></td>
<td style="text-align:center">指令级并行，线程间不并行</td>
<td style="text-align:center">指令级并行，线程间不并行</td>
<td style="text-align:center">指令级并行，线程级并行</td>
</tr>
</tbody>
</table>
<p>三种硬件多线程实现方式的调度示例如下图所示：</p>
<img src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/19/67daab4e14e23.png" alt="image-20250319193201920" style="zoom:67%;" />
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>计算机组成原理 第五章 中央处理器</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://aoxuexinghuo.github.io/2025/03/12/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%20%E7%AC%AC%E4%BA%94%E7%AB%A0%20%E4%B8%AD%E5%A4%AE%E5%A4%84%E7%90%86%E5%99%A8/">https://aoxuexinghuo.github.io/2025/03/12/计算机组成原理 第五章 中央处理器/</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>作者</h><div class="post-copyright-cc-info"><h>℡傲雪&amp;星火ぴ</h></div></div><div class="post-copyright-c"><h>发布于</h><div class="post-copyright-cc-info"><h>2025-03-12</h></div></div><div class="post-copyright-u"><h>更新于</h><div class="post-copyright-cc-info"><h>2026-01-01</h></div></div><div class="post-copyright-c"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/408/">408</a><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/">计算机组成原理</a></div><div class="post-share"><div class="social-share" data-image="https://bu.dusays.com/2025/03/12/67d16c3e6dcfc.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/03/09/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%20%E7%AC%AC%E5%9B%9B%E7%AB%A0%20%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F/" title="计算机组成原理 第四章 指令系统"><img class="cover" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/09/67cd34ff37e69.jpg" onerror="onerror=null;src='https://bu.dusays.com/2024/11/28/674845666d85e.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">计算机组成原理 第四章 指令系统</div></div><div class="info-2"><div class="info-item-1">不要小瞧我和计算机之间的羁绊啊！</div></div></div></a><a class="pagination-related" href="/2025/03/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%20%E7%AC%AC%E5%85%AD%E7%AB%A0%20%E6%80%BB%E7%BA%BF/" title="计算机组成原理 第六章 总线"><img class="cover" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/02/22/67b9acecd777d.jpg" onerror="onerror=null;src='https://bu.dusays.com/2024/11/28/674845666d85e.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">计算机组成原理 第六章 总线</div></div><div class="info-2"><div class="info-item-1">奖励局。</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/02/17/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%20%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0/" title="计算机组成原理 第一章 计算机系统概述"><img class="cover" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/02/17/67b2da11a9c64.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-02-17</div><div class="info-item-2">计算机组成原理 第一章 计算机系统概述</div></div><div class="info-2"><div class="info-item-1">啊啊啊，我喜欢计算机组成原理啊啊啊</div></div></div></a><a class="pagination-related" href="/2025/03/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%20%E7%AC%AC%E4%B8%83%E7%AB%A0%20%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E7%B3%BB%E7%BB%9F/" title="计算机组成原理 第七章 输入&#x2F;输出系统"><img class="cover" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/20/67dc170ae54ef.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-20</div><div class="info-item-2">计算机组成原理 第七章 输入&#x2F;输出系统</div></div><div class="info-2"><div class="info-item-1">完结撒花！</div></div></div></a><a class="pagination-related" href="/2025/03/01/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%20%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F/" title="计算机组成原理 第三章 存储系统"><img class="cover" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/02/67c3f67d3090a.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-01</div><div class="info-item-2">计算机组成原理 第三章 存储系统</div></div><div class="info-2"><div class="info-item-1">计算机省钱原理。</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81CPU-%E7%9A%84%E5%8A%9F%E8%83%BD%E5%92%8C%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-text">一、CPU 的功能和基本结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%8C%87%E4%BB%A4%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B"><span class="toc-text">二、指令执行过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%8C%87%E4%BB%A4%E5%91%A8%E6%9C%9F"><span class="toc-text">1.指令周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8C%87%E4%BB%A4%E5%91%A8%E6%9C%9F%E7%9A%84%E6%95%B0%E6%8D%AE%E6%B5%81"><span class="toc-text">2.指令周期的数据流</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E5%8F%96%E6%8C%87%E5%91%A8%E6%9C%9F"><span class="toc-text">（1）取指周期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E9%97%B4%E5%9D%80%E5%91%A8%E6%9C%9F"><span class="toc-text">（2）间址周期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E6%89%A7%E8%A1%8C%E5%91%A8%E6%9C%9F"><span class="toc-text">（3）执行周期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E4%B8%AD%E6%96%AD%E5%91%A8%E6%9C%9F"><span class="toc-text">（4）中断周期</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%8C%87%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%96%B9%E6%A1%88"><span class="toc-text">3.指令执行方案</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E5%8D%95%E5%91%A8%E6%9C%9F%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-text">（1）单周期处理器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E5%A4%9A%E5%91%A8%E6%9C%9F%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-text">（2）多周期处理器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E6%B5%81%E6%B0%B4%E7%BA%BF%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-text">（3）流水线处理器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%95%B0%E6%8D%AE%E9%80%9A%E8%B7%AF%E7%9A%84%E5%8A%9F%E8%83%BD%E5%92%8C%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-text">三、数据通路的功能和基本结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%95%B0%E6%8D%AE%E9%80%9A%E8%B7%AF%E7%9A%84%E5%8A%9F%E8%83%BD%E5%92%8C%E7%BB%84%E6%88%90"><span class="toc-text">1.数据通路的功能和组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E9%80%9A%E8%B7%AF%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-text">2.数据通路的基本结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89CPU-%E5%86%85%E9%83%A8%E5%8D%95%E6%80%BB%E7%BA%BF%E6%96%B9%E5%BC%8F"><span class="toc-text">（1）CPU 内部单总线方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89CPU-%E5%86%85%E9%83%A8%E5%A4%9A%E6%80%BB%E7%BA%BF%E6%96%B9%E5%BC%8F"><span class="toc-text">（2）CPU 内部多总线方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E4%B8%93%E7%94%A8%E6%95%B0%E6%8D%AE%E9%80%9A%E8%B7%AF%E6%96%B9%E5%BC%8F"><span class="toc-text">（3）专用数据通路方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AE%E9%80%9A%E8%B7%AF%E7%9A%84%E6%93%8D%E4%BD%9C%E4%B8%BE%E4%BE%8B"><span class="toc-text">3.数据通路的操作举例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%8E%A7%E5%88%B6%E5%99%A8%E7%9A%84%E5%8A%9F%E8%83%BD%E5%92%8C%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-text">四、控制器的功能和工作原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%A1%AC%E5%B8%83%E7%BA%BF%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="toc-text">1.硬布线控制器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%BE%AE%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="toc-text">2.微程序控制器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E5%BE%AE%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">（1）微程序控制的基本概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E5%BE%AE%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6%E5%99%A8%E7%9A%84%E7%BB%84%E6%88%90%E4%B8%8E%E7%BB%93%E6%9E%84"><span class="toc-text">（2）微程序控制器的组成与结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E5%BE%AE%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-text">（3）微程序控制器的工作原理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%BE%AE%E6%8C%87%E4%BB%A4%E7%9A%84%E8%AE%BE%E8%AE%A1"><span class="toc-text">3.微指令的设计</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E5%BE%AE%E6%8C%87%E4%BB%A4%E7%9A%84%E6%A0%BC%E5%BC%8F"><span class="toc-text">（1）微指令的格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E5%BE%AE%E6%8C%87%E4%BB%A4%E7%9A%84%E7%BC%96%E7%A0%81%E6%96%B9%E5%BC%8F"><span class="toc-text">（2）微指令的编码方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E5%BE%AE%E6%8C%87%E4%BB%A4%E7%9A%84%E5%9C%B0%E5%9D%80%E5%BD%A2%E6%88%90%E6%96%B9%E5%BC%8F"><span class="toc-text">（3）微指令的地址形成方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%BE%AE%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6%E5%8D%95%E5%85%83%E7%9A%84%E8%AE%BE%E8%AE%A1"><span class="toc-text">4.微程序控制单元的设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E4%B8%A4%E7%A7%8D%E6%8E%A7%E5%88%B6%E5%99%A8%E5%AF%B9%E6%AF%94"><span class="toc-text">5.两种控制器对比</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%8C%87%E4%BB%A4%E6%B5%81%E6%B0%B4%E7%BA%BF"><span class="toc-text">五、指令流水线</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">1.基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-text">2.性能指标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%8C%87%E4%BB%A4%E6%B5%81%E6%B0%B4%E7%BA%BF%E5%BD%B1%E5%93%8D%E5%9B%A0%E7%B4%A0%E5%88%86%E7%B1%BB"><span class="toc-text">3.指令流水线影响因素分类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E7%BB%93%E6%9E%84%E5%86%92%E9%99%A9"><span class="toc-text">（1）结构冒险</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E6%95%B0%E6%8D%AE%E5%86%92%E9%99%A9"><span class="toc-text">（2）数据冒险</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E6%8E%A7%E5%88%B6%E5%86%92%E9%99%A9"><span class="toc-text">（3）控制冒险</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%B5%81%E6%B0%B4%E7%BA%BF%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-text">4.流水线的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%B5%81%E6%B0%B4%E7%BA%BF%E7%9A%84%E5%A4%9A%E5%8F%91%E6%8A%80%E6%9C%AF"><span class="toc-text">5.流水线的多发技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E4%BA%94%E6%AE%B5%E5%BC%8F%E6%8C%87%E4%BB%A4%E6%B5%81%E6%B0%B4%E7%BA%BF"><span class="toc-text">6.五段式指令流水线</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E5%A4%9A%E5%A4%84%E7%90%86%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">六、多处理器的基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-SISD%E3%80%81SIMD%E3%80%81MIMD-%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">1.SISD、SIMD、MIMD 的基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%A1%AC%E4%BB%B6%E5%A4%9A%E7%BA%BF%E7%A8%8B"><span class="toc-text">2.硬件多线程</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url(https://bu.dusays.com/2024/11/27/6746e02939613.jpg);"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2026 By ℡傲雪&星火ぴ</div><div class="footer_custom_text">有一天，我看了四十四次日落！你知道的，当一个人情绪低落的时候，他会格外喜欢看日落。 —— 《小王子》</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.isShuoshuo
  const option = null

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://aoxue-comment.tateishishima.site/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://aoxue-comment.tateishishima.site/',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer src="/js/sakura.js"></script><script src="/js/live2d.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://aoxuexinghuo.github.io/categories/数据结构/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📚 数据结构 (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://aoxuexinghuo.github.io/categories/计算机组成原理/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📖 计算机组成原理 (7)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://aoxuexinghuo.github.io/categories/操作系统/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">‍📓 操作系统 (5)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://aoxuexinghuo.github.io/categories/计算机网络/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📒 计算机网络 自顶向下 (7)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><a class="magnet_link_more"  href="https://aoxuexinghuo.github.io/categories" style="flex:1;text-align: center;margin-bottom: 10px;">查看更多...</a></div></div>';
    console.log('已挂载magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(50% - 5px);background: #f2f2f2;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: #b30070}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/12/31/英二真题精读/" alt=""><img width="48" height="48" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/12/31/6773e03fd49f8.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2026-01-01</span><a class="blog-slider__title" href="2024/12/31/英二真题精读/" alt="">英二真题精读</a><div class="blog-slider__text">没有一篇文章是白背的（</div><a class="blog-slider__button" href="2024/12/31/英二真题精读/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/02/22/数二 随笔/" alt=""><img width="48" height="48" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/03/19/67daad7eb1caa.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2026-01-01</span><a class="blog-slider__title" href="2025/02/22/数二 随笔/" alt="">数二 随笔</a><div class="blog-slider__text">每天第一件事，先背一遍泰勒展开式</div><a class="blog-slider__button" href="2025/02/22/数二 随笔/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/04/23/数据结构 随笔/" alt=""><img width="48" height="48" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/04/23/68089cd18bbab.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2026-01-01</span><a class="blog-slider__title" href="2025/04/23/数据结构 随笔/" alt="">数据结构 随笔</a><div class="blog-slider__text">我是谁？</div><a class="blog-slider__button" href="2025/04/23/数据结构 随笔/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/02/17/计算机组成原理 第一章 计算机系统概述/" alt=""><img width="48" height="48" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/02/17/67b2da11a9c64.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2026-01-01</span><a class="blog-slider__title" href="2025/02/17/计算机组成原理 第一章 计算机系统概述/" alt="">计算机组成原理 第一章 计算机系统概述</a><div class="blog-slider__text">啊啊啊，我喜欢计算机组成原理啊啊啊</div><a class="blog-slider__button" href="2025/02/17/计算机组成原理 第一章 计算机系统概述/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/23/操作系统 第一章 计算机系统概述/" alt=""><img width="48" height="48" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2025/04/07/67f376ff326d5.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2026-01-01</span><a class="blog-slider__title" href="2025/03/23/操作系统 第一章 计算机系统概述/" alt="">操作系统 第一章 计算机系统概述</a><div class="blog-slider__text">我是谁？</div><a class="blog-slider__button" href="2025/03/23/操作系统 第一章 计算机系统概述/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/09/22/《计算机网络 自顶向下方法》笔记：第一章 计算机网络和因特网/" alt=""><img width="48" height="48" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/27/6746e02939613.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2026-01-01</span><a class="blog-slider__title" href="2024/09/22/《计算机网络 自顶向下方法》笔记：第一章 计算机网络和因特网/" alt="">《计算机网络 自顶向下方法》笔记：第一章 计算机网络和因特网</a><div class="blog-slider__text">有种高中生物的美。</div><a class="blog-slider__button" href="2024/09/22/《计算机网络 自顶向下方法》笔记：第一章 计算机网络和因特网/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/11/27/博客优化日志/" alt=""><img width="48" height="48" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/30/674ae885d9695.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2026-01-01</span><a class="blog-slider__title" href="2024/11/27/博客优化日志/" alt="">博客优化日志</a><div class="blog-slider__text">记录对博客的修改，目前看起来还是很塑料。</div><a class="blog-slider__button" href="2024/11/27/博客优化日志/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/11/26/Hexo博客搭建教程/" alt=""><img width="48" height="48" src= "https://bu.dusays.com/2024/12/17/6761341f89d99.gif" data-lazy-src="https://bu.dusays.com/2024/11/30/674ae88cdbcd7.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2026-01-01</span><a class="blog-slider__title" href="2024/11/26/Hexo博客搭建教程/" alt="">Hexo博客搭建教程</a><div class="blog-slider__text">先开个坑！</div><a class="blog-slider__button" href="2024/11/26/Hexo博客搭建教程/" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --></body></html>