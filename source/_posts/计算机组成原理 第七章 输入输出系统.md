---
title: 计算机组成原理 第七章 输入/输出系统
date: 2025-03-20 21:23:03
category: 计算机组成原理
tags:
- 计算机组成原理
- 笔记
description: 完结撒花！
cover: https://bu.dusays.com/2025/03/20/67dc170ae54ef.jpg
series: CS
---

> **🚥计算机组成原理 系列文章导航🚥**
>
> {% series CS %}

## 一、I/O 接口

**I/O 接口**：也称 I/O 控制器、设备控制器，负责协调主机与外部设备之间的数据传输。

### 1.I/O 接口的功能

<img src="https://bu.dusays.com/2025/03/21/67dd15c8a5c2c.png" alt="image-20250321152203721" style="zoom:67%;" />

- **数据缓冲**：通过数据缓冲寄存器（DBR）达到主机和外设工作速度的匹配。
- **错误或状态监测**：通过状态寄存器反馈设备的各种错误、状态信息，供 CPU 查用。
- **控制和定时**：接收从控制总线发来的控制信号、时钟信号。
- **数据格式转换**：串->并、并->串等输出格式的转换。
- **与主机和设备通信**：实现 “主机 - I/O 接口 - I/O 设备” 之间的的通信。

### 2.I/O 接口的基本结构和功能

![image-20250321153117186](https://bu.dusays.com/2025/03/21/67dd15e481001.png)

**数据缓冲寄存器**用来暂存 CPU 或内存之间传送的数据信息；**状态寄存器**用来记录接口和设备的状态信息；**控制寄存器**用来保存 CPU 对外设的控制信息。状态寄存器和控制寄存器在传送方向上是相反的，在访问时间上也是错开的，因此可将它们合二为一。

- **数据线**：读写数据、状态字、控制字、中断类型号
- **地址线**：指明 I/O 端口
- **控制线**：读/写 IO 端口的信号、中断请求信号

> **注意**：IO 控制器中的各种寄存器称为 I/O 端口，例如控制器寄存器称为控制端口。要注意端口和接口是两个不同的概念。
>
> <img src="https://bu.dusays.com/2025/03/21/67dd4fe468680.png" alt="image-20250321161228089" style="zoom: 67%;" />

工作流程：

- **发命令**：发送命令字（也叫控制字）到控制寄存器，向设备发送命令（需要驱动程序的协助，因为每个设备所能识别的命令码不同）
- **读状态**：从状态寄存器读取状态字，获得设备或 I/O 控制器的状态信息
- **读/写数据**：从数据缓冲寄存器发送或读取数据，完成主机与外设的数据交换

### 3.I/O 接口的类型

从不同的角度看，I/O 接口可以分为不同的类型：

- 按数据传送方式（外设和接口一侧）：分为**并行接口**（一字节或一个字的所有位同时传送）和**串行接口**（一位一位地有序传送），接口要完成数据格式的转换。
- 按主机访问 I/O 设备的控制方式：分为**程序查询接口**、**中断接口**和 **DMA 接口**等。
- 按功能选择的灵活性：分为**可编程接口**（通过编程改变接口功能）和**不可编程接口**。

### 4.I/O 端口编址

I/O 端口想要能够被 CPU 访问，就必须要对各个端口进行编址，每个端口对应一个端口地址，编址方式有与存储器**统一编址**和**独立编址**两种。

![image-20250321192414362](https://bu.dusays.com/2025/03/21/67dd4fea5917d.png)

**统一编制**：把 I/O 端口当做存储器的单元进行地址分配，用统一的访存指令就可以访问 I/O 端口，又称为**存储器映射方式**。

靠不同的地址码区分内存和 I/O 设备，I/O 地址要求相对固定在地址的某些部分。

- **优点**：不要需要专门的输入/输出指令，所以访存指令都可直接访问端口，编程设计灵活性高；端口有较大的编址空间；读写控制逻辑电路简单。
- **缺点**：端口占用了主存地址空间，使主存地址空间变小；外设寻址时间长（地址位数越多，地址译码速度越慢）。

**独立编制**：I/O 端口地址与存储器地址无关，独立编制 CPU 需要设置专门的输入/输出指令访问端口，又称 I/O 映射方式。

靠不同的指令区分内存和 I/O 设备。

- **优点**：使用专用 I/O 指令，程序编制清晰；I/O 端口地址位数少，地址译码速度快；I/O 端口的地址不占用主存地址空间。
- **缺点**：I/O 指令类型少，一般只能对端口进行传送操作，程序设计灵活性差；需要 CPU 提供存储器读/写、I/O 设备读/写两组控制信号，增加了控制逻辑电路的复杂性。

> **注意**：对数据缓存寄存器、状态/控制寄存器的访问操作是通过相应的指令来完成的，通常称这类指令为 **I/O 指令**，I/O 指令只能在操作系统内核的底层 I/O 软件中使用，它们是一种特权指令。

## 二、I/O 方式

![image-20250321194624620](C:\Users\LENOVO\AppData\Roaming\Typora\typora-user-images\image-20250321194624620.png)

### 1.程序查询方式

![image-20250321205617423](C:\Users\LENOVO\AppData\Roaming\Typora\typora-user-images\image-20250321205617423.png)

根据 CPU 查询 I/O 设备状态的方式的不同，程序查询方式又可以分为两种：

- **独占查询**：一旦设备被启动，CPU 就一直持续查询接口状态，CPU 花费 100% 的时间用于 I/O 操作，此时外设和 CPU 完全串行工作。
- **定时查询**：CPU 周期性地查询接口状态，每次总是等到条件满足才进行一个数据的传送，传送完成后返回到用户程序。定时查询的时间间隔与设备的传输速率有关。

**优点**：接口设计简单、设备量少。

**缺点**：CPU 在信息传送过程中要花费很多时间用于查询和等待，而在一段时间内只能和一台外设交换信息，效率大大降低。

### 2.程序中断方式





















